import{r as v,j as e}from"./app-rW6VLnf3.js";import{B as f}from"./button-f2CgmDgl.js";import{C as M}from"./calendar-D-d5VlHl.js";import{c as P}from"./form-NGfs6Kfh.js";import{P as Y,a as k,b as I}from"./popover-C8uGYBqK.js";import{c as w}from"./utils-CBpLCZd1.js";import{C as z}from"./calendar-CRdYeEaQ.js";import{X as L}from"./x-CByXgzkI.js";import{P as T}from"./plus-DGZQrHpC.js";import"./index-DHK0gDF0.js";import"./index-CZnBwuMT.js";import"./format-CNjBDjOL.js";import"./chevron-left-DM2GD9wr.js";import"./createLucideIcon-BmjPsIbX.js";import"./chevron-right-Bf-wBR9f.js";import"./chevron-down-DUwS6UhY.js";import"./label-BTqCQP2K.js";import"./index-TWQH2bKq.js";import"./floating-ui.react-dom-DhS76m4i.js";import"./Combination-BlTUtWD8.js";function re({value:S,onChange:m,startDate:x,endDate:j}){const[c,p]=v.useState(S),[_,C]=v.useState({});function g(n){if(!n)return;const[t,r,s]=n.split("-").map(d=>parseInt(d,10));if(!(!t||!r||!s))return new Date(t,r-1,s)}function y(n){if(!n)return null;const[t,r,s]=n.split("-").map(u=>parseInt(u,10)),a=new Date(t,(r||1)-1,s||1).getDay();return[{value:"minggu",label:"Minggu"},{value:"senin",label:"Senin"},{value:"selasa",label:"Selasa"},{value:"rabu",label:"Rabu"},{value:"kamis",label:"Kamis"},{value:"jumat",label:"Jumat"},{value:"sabtu",label:"Sabtu"}][a]??null}function h(n,t,r){const s=c.map((d,a)=>{if(a!==n)return d;if(t==="schedule_date"){const i=y(r);return{...d,schedule_date:r,day:(i==null?void 0:i.value)??""}}return{...d,[t]:r}});p(s),m(s)}function N(){const n=[...c,{id:void 0,schedule_date:"",day:"",start_time:"07:00",end_time:"10:00"}];p(n),m(n)}function O(n){const t=c.filter((r,s)=>s!==n);p(t),m(t)}function D(n,t){C(r=>({...r,[n]:t}))}const l=x?g(x):void 0,o=j?g(j):void 0;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{children:"Jadwal Bootcamp"}),e.jsx("div",{className:"text-muted-foreground mb-2 text-sm",children:l&&o?e.jsxs(e.Fragment,{children:["Pilih tanggal dalam rentang:"," ",e.jsx("span",{className:"font-medium",children:l.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})})," ","-"," ",e.jsx("span",{className:"font-medium",children:o.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})})]}):"Tentukan tanggal mulai dan selesai bootcamp terlebih dahulu"}),c.map((n,t)=>{const r=n.schedule_date?y(n.schedule_date):null,s=g(n.schedule_date),d=_[t]||!1;return e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[e.jsxs(Y,{open:d,onOpenChange:a=>D(t,a),children:[e.jsx(k,{asChild:!0,children:e.jsx(f,{variant:"outline",type:"button",disabled:!l||!o,className:w("w-36 justify-between",!s&&"text-muted-foreground",(!l||!o)&&"cursor-not-allowed opacity-50"),children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(z,{size:16}),s?s.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):!l||!o?"Set tanggal bootcamp":"Pilih tanggal"]})})}),e.jsx(I,{className:"w-auto p-0",align:"start",children:e.jsx(M,{mode:"single",selected:s,defaultMonth:s||l,endMonth:new Date(new Date().getFullYear()+10,11),captionLayout:"dropdown",disabled:a=>{if(!l||!o)return!0;const i=new Date(a.getFullYear(),a.getMonth(),a.getDate()),u=new Date(l.getFullYear(),l.getMonth(),l.getDate()),b=new Date(o.getFullYear(),o.getMonth(),o.getDate());return i<u||i>b},onSelect:a=>{if(!a||!l||!o)return;const i=new Date(a.getFullYear(),a.getMonth(),a.getDate()),u=new Date(l.getFullYear(),l.getMonth(),l.getDate()),b=new Date(o.getFullYear(),o.getMonth(),o.getDate());if(i>=u&&i<=b){const F=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`;h(t,"schedule_date",F)}D(t,!1)}})})]}),e.jsx("span",{className:w("inline-flex items-center rounded-full border px-3 py-1 text-sm",r?"border-blue-200 bg-blue-50 text-blue-700":"border-zinc-200 bg-zinc-50 text-zinc-600"),title:"Terisi otomatis dari tanggal",children:r?r.label:"Pilih tgl"}),e.jsx("input",{type:"time",value:n.start_time,onChange:a=>h(t,"start_time",a.target.value),className:"bg-background w-28 rounded-lg border px-3 py-1.5"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"time",value:n.end_time,onChange:a=>h(t,"end_time",a.target.value),className:"bg-background w-28 rounded-lg border px-3 py-1.5"}),e.jsx(f,{type:"button",variant:"destructive",size:"icon",onClick:()=>O(t),children:e.jsx(L,{})})]},t)}),e.jsx(f,{type:"button",onClick:N,className:"mt-1 block hover:cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{})," Tambah Jadwal"]})})]})}export{re as default};
