import{K,r as F,j as e,L as G,$ as b,S as q}from"./app-L6Zjq6f8.js";import{D as V}from"./delete-dialog-COZRDYTc.js";import{B as r}from"./badge-Dxp9nqy-.js";import{B as n}from"./button-iHl8j0Cl.js";import{C as u,a as j,b as f,d as C,c as g}from"./card-D_33op8D.js";import{I as T}from"./input-DF_sa7BZ.js";import{S as B}from"./separator-CfvhPNrd.js";import{T as X,a as z,b as S,c as d,d as J,e as c}from"./table-p8dpYrsR.js";import{T as Q,a as Y,b as P,c as _}from"./tabs-BV0SULNA.js";import{A as Z}from"./admin-layout-BQmBPGDa.js";import{r as i}from"./utils-BpJJtAEZ.js";import{t as m}from"./index-DyNdN8Gx.js";import{i as I}from"./isPast-DzoOH1ok.js";import{L as D}from"./link-BzW6TWyP.js";import{S as ee}from"./shopping-cart-DcdnSRYB.js";import{U as se}from"./users-WpRa2FOb.js";import{P as L}from"./package-tmLntv9z.js";import{S as te}from"./send-CtZ1JCst.js";import{C as ae}from"./circle-x-BPE-jaZR.js";import{S as re}from"./square-pen-Be557c0h.js";import{C as ie}from"./copy-aUujxJAj.js";import{T as le}from"./trash-BsPpy1Tx.js";import{C as ne}from"./calendar-D2trP6xp.js";import{f as x}from"./format-CNjBDjOL.js";import{i as o}from"./id-BLKIQCr7.js";import"./alert-dialog-CdwOAHl-.js";import"./index-Be2NpYWM.js";import"./index-C-VVp7bQ.js";import"./index-CBcny0Z9.js";import"./Combination-BRRmWCDU.js";import"./index-D1EuIB5B.js";import"./index-Bfiu80-q.js";import"./sonner-_1xeCzAJ.js";import"./breadcrumbs-DbAxw0Mx.js";import"./createLucideIcon-COp6R_ri.js";import"./x-DHu3L2Ar.js";import"./tooltip-Bo6tbd02.js";import"./index-CnkELd2K.js";import"./index-B_nHj6te.js";import"./index-B3sdIJvY.js";import"./floating-ui.react-dom-CehU6xlZ.js";import"./index-CAC7d5VH.js";import"./index-Dlu75eFg.js";import"./dropdown-menu-Di-r4mzf.js";import"./index-LsGIMyqg.js";import"./check-C_iqPmSz.js";import"./avatar-BXYwyG0Y.js";import"./use-initials-t5cw5_4g.js";import"./user-BAtMgXIO.js";import"./app-sidebar-header-C-7j0wQv.js";import"./chevrons-up-down--glUwrUF.js";import"./user-check-DqLS7jYM.js";import"./presentation-W-mfIGAs.js";import"./gift-Cyl4QM1D.js";import"./banknote-Ch_M8yse.js";import"./dollar-sign-BHli7sqG.js";import"./file-text-DKQDTDjG.js";function xs({bundle:s,groupedItems:a,totalOriginalPrice:M,discountAmount:H,discountPercentage:v,flash:l}){const{auth:A}=K().props,h=A.role.includes("affiliate"),E=[{title:"Paket Bundling",href:route("bundles.index")},{title:s.title,href:route("bundles.show",s.id)}];F.useEffect(()=>{l!=null&&l.success&&m.success(l.success),l!=null&&l.error&&m.error(l.error)},[l]);const R=()=>{q.delete(route("bundles.destroy",s.id))},W=async()=>{try{await navigator.clipboard.writeText(s.registration_url),m.success("Link pendaftaran berhasil disalin!")}catch{m.error("Gagal menyalin link pendaftaran")}},$=async()=>{try{await navigator.clipboard.writeText(s.bundle_url),m.success("Link produk berhasil disalin!")}catch{m.error("Gagal menyalin link produk")}},k={draft:{label:"Draft",color:"bg-gray-100 text-gray-700"},published:{label:"Published",color:"bg-green-100 text-green-700"},archived:{label:"Archived",color:"bg-red-100 text-red-700"}},N=s.enrollments.length,O=s.enrollments.filter(t=>t.invoice.status==="paid").length,U=s.enrollments.filter(t=>t.invoice.status==="paid").reduce((t,y)=>t+y.invoice.amount,0),p=s.registration_deadline?new Date(s.registration_deadline):null,w=p?I(p):!1;return e.jsxs(Z,{breadcrumbs:E,children:[e.jsx(G,{title:`Detail ${s.title}`}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsxs("h1",{className:"mb-4 text-2xl font-semibold",children:["Detail ",s.title]}),e.jsxs("div",{className:`${h?"":"lg:grid-cols-3"} grid grid-cols-1 gap-4 lg:gap-6`,children:[e.jsxs(Q,{defaultValue:"detail",className:"lg:col-span-2",children:[e.jsxs(Y,{children:[e.jsx(P,{value:"detail",children:"Detail Bundling"}),!h&&e.jsxs(P,{value:"enrollments",children:["Pembelian",N>0&&e.jsx("span",{className:"bg-primary/10 ml-1 rounded-full px-2 py-0.5 text-xs",children:N})]})]}),e.jsx(_,{value:"detail",children:e.jsxs(u,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(f,{children:s.title}),e.jsxs(C,{className:"mt-1",children:[s.bundle_items.length," item dalam paket"]})]}),e.jsx(r,{className:k[s.status].color,children:k[s.status].label})]})}),e.jsxs(g,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Link Pendaftaran"}),e.jsx(T,{type:"text",value:s.registration_url,readOnly:!0,className:"rounded border p-2 text-sm",placeholder:"Link Pendaftaran"}),e.jsxs(n,{type:"button",onClick:W,className:"w-full hover:cursor-pointer",disabled:s.status==="draft"||s.status==="archived",children:["Salin Link Pendaftaran ",e.jsx(D,{})]})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Link Produk Bundling ",h&&"(dengan kode afiliasi)"]}),e.jsx(T,{type:"text",value:s.bundle_url,readOnly:!0,className:"rounded border p-2 text-sm",placeholder:"Link Produk Bundling"}),e.jsxs(n,{type:"button",onClick:$,className:"w-full hover:cursor-pointer",disabled:s.status==="draft"||s.status==="archived",children:["Salin Link Produk ",e.jsx(D,{})]})]})]}),s.status==="published"?e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:"Share link diatas ke sosial media, whatsapp, tiktok, landing page, email ataupun channel penjualan lainnya untuk mendapatkan klik dan pendaftaran produk bundling."}):e.jsx("p",{className:"text-center text-sm text-red-500",children:"Produk ini belum diterbitkan. Silakan terbitkan produk terlebih dahulu untuk membagikan link akses bundling produk."}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-sm font-medium",children:"Thumbnail"}),e.jsx("img",{src:s.thumbnail?`/storage/${s.thumbnail}`:"/assets/images/placeholder.png",alt:s.title,className:"h-56 rounded-lg border"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-medium text-gray-600",children:"Total Harga Normal"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.format(M)})]}),e.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-medium text-green-700",children:"Harga Bundle"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:i.format(s.price)}),v>0&&e.jsxs("p",{className:"mt-2 text-xs text-green-600",children:["Hemat ",v,"% (",i.format(H),")"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-sm font-medium",children:"Isi Paket Bundling"}),e.jsxs("div",{className:"space-y-4",children:[a.courses.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-2 text-xs font-medium text-gray-500",children:["KELAS ONLINE (",a.courses.length,")"]}),e.jsx("div",{className:"space-y-2",children:a.courses.map(t=>t.bundleable?e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.bundleable.title}),e.jsx(r,{variant:"outline",className:"mt-1 bg-blue-50 text-xs",children:"Course"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:i.format(t.price)})]},t.id):e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-red-200 bg-red-50 p-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Course tidak ditemukan (sudah dihapus)"}),e.jsx(r,{variant:"outline",className:"mt-1 bg-red-100 text-xs text-red-700",children:"Course"})]}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:i.format(t.price)})]},t.id))})]}),a.bootcamps.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-2 text-xs font-medium text-gray-500",children:["BOOTCAMP (",a.bootcamps.length,")"]}),e.jsx("div",{className:"space-y-2",children:a.bootcamps.map(t=>t.bundleable?e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.bundleable.title}),e.jsx(r,{variant:"outline",className:"mt-1 bg-purple-50 text-xs",children:"Bootcamp"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:i.format(t.price)})]},t.id):e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-red-200 bg-red-50 p-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Bootcamp tidak ditemukan (sudah dihapus)"}),e.jsx(r,{variant:"outline",className:"mt-1 bg-red-100 text-xs text-red-700",children:"Bootcamp"})]}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:i.format(t.price)})]},t.id))})]}),a.webinars.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-2 text-xs font-medium text-gray-500",children:["WEBINAR (",a.webinars.length,")"]}),e.jsx("div",{className:"space-y-2",children:a.webinars.map(t=>t.bundleable?e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.bundleable.title}),e.jsx(r,{variant:"outline",className:"mt-1 bg-green-50 text-xs",children:"Webinar"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:i.format(t.price)})]},t.id):e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-red-200 bg-red-50 p-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Webinar tidak ditemukan (sudah dihapus)"}),e.jsx(r,{variant:"outline",className:"mt-1 bg-red-100 text-xs text-red-700",children:"Webinar"})]}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:i.format(t.price)})]},t.id))})]})]})]}),s.short_description&&e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-sm font-medium",children:"Deskripsi Singkat"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:s.short_description})]}),s.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-sm font-medium",children:"Deskripsi Lengkap"}),e.jsx("p",{className:"text-muted-foreground text-sm whitespace-pre-line",children:s.description})]}),s.benefits&&e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-sm font-medium",children:"Benefit Bundling"}),e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.benefits}})]}),s.registration_url&&e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-sm font-medium",children:"URL Pendaftaran"}),e.jsx("a",{href:s.registration_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary text-sm hover:underline",children:s.registration_url})]})]})]})}),!h&&e.jsx(_,{value:"enrollments",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(u,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Total Pembelian"}),e.jsx(ee,{className:"text-muted-foreground h-4 w-4"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Semua transaksi"})]})]}),e.jsxs(u,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Pembayaran Sukses"}),e.jsx(se,{className:"text-muted-foreground h-4 w-4"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"User yang sudah bayar"})]})]}),e.jsxs(u,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(L,{className:"text-muted-foreground h-4 w-4"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.format(U)}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Dari pembayaran sukses"})]})]})]}),e.jsxs(u,{children:[e.jsxs(j,{children:[e.jsx(f,{children:"Daftar Pembelian"}),e.jsx(C,{children:"Riwayat pembelian bundle oleh user"})]}),e.jsx(g,{children:s.enrollments.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(X,{children:[e.jsx(z,{children:e.jsxs(S,{children:[e.jsx(d,{children:"No"}),e.jsx(d,{children:"User"}),e.jsx(d,{children:"Kode Invoice"}),e.jsx(d,{children:"Total"}),e.jsx(d,{children:"Status"}),e.jsx(d,{children:"Tanggal"})]})}),e.jsx(J,{children:s.enrollments.map((t,y)=>e.jsxs(S,{children:[e.jsx(c,{children:y+1}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.invoice.user.name}),e.jsx("p",{className:"text-muted-foreground text-xs",children:t.invoice.user.email})]})}),e.jsx(c,{children:e.jsx("code",{className:"text-primary rounded bg-gray-100 px-2 py-1 text-xs",children:t.invoice.invoice_code})}),e.jsx(c,{className:"font-medium",children:i.format(t.invoice.amount)}),e.jsx(c,{children:e.jsx(r,{className:t.invoice.status==="paid"?"bg-green-100 text-green-700":t.invoice.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700",children:t.invoice.status})}),e.jsx(c,{className:"text-sm",children:t.invoice.paid_at?x(new Date(t.invoice.paid_at),"dd MMM yyyy HH:mm",{locale:o}):x(new Date(t.created_at),"dd MMM yyyy HH:mm",{locale:o})})]},t.id))})]})}):e.jsx("p",{className:"text-muted-foreground py-8 text-center text-sm",children:"Belum ada pembelian untuk bundle ini"})})]})]})})]}),!h&&e.jsxs("div",{children:[e.jsx("h2",{className:"my-2 text-lg font-medium",children:"Aksi & Pengaturan"}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[(s.status==="draft"||s.status==="archived")&&e.jsxs(e.Fragment,{children:[!s.thumbnail&&e.jsx("div",{className:"mb-4 rounded-lg bg-red-50 p-3 text-center text-sm text-red-700",children:"Thumbnail belum diupload. Silakan upload thumbnail sebelum menerbitkan."}),s.bundle_items.length<2&&e.jsx("div",{className:"mb-4 rounded-lg bg-red-50 p-3 text-center text-sm text-red-700",children:"Item bundle minimal 2. Silakan tambahkan item sebelum menerbitkan."}),s.price<=0&&e.jsx("div",{className:"mb-4 rounded-lg bg-red-50 p-3 text-center text-sm text-red-700",children:"Harga bundle belum diset. Silakan set harga sebelum menerbitkan."}),e.jsx(n,{asChild:!0,className:"w-full",disabled:!s.thumbnail||s.bundle_items.length<2||s.price<=0,children:e.jsxs(b,{method:"post",href:route("bundles.publish",s.id),children:[e.jsx(te,{}),"Terbitkan"]})})]}),s.status==="published"&&e.jsx(n,{asChild:!0,className:"w-full",children:e.jsxs(b,{method:"post",href:route("bundles.archive",s.id),children:[e.jsx(ae,{}),"Arsipkan"]})}),e.jsx(B,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{asChild:!0,className:"w-full",variant:"secondary",children:e.jsxs(b,{href:route("bundles.edit",s.id),children:[e.jsx(re,{})," Edit"]})}),e.jsx(n,{asChild:!0,className:"w-full",variant:"secondary",children:e.jsxs(b,{method:"post",href:route("bundles.duplicate",s.id),children:[e.jsx(ie,{})," Duplicate"]})}),e.jsx(V,{trigger:e.jsxs(n,{variant:"destructive",className:"w-full",disabled:s.enrollments.length>0,children:[e.jsx(le,{})," Hapus"]}),title:"Apakah Anda yakin ingin menghapus bundle ini?",itemName:s.title,onConfirm:R}),s.enrollments.length>0&&e.jsx("p",{className:"text-center text-xs text-red-500",children:"Bundle tidak dapat dihapus karena sudah ada pembelian"})]})]}),e.jsxs("div",{className:"mt-4 space-y-4 rounded-lg border p-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Informasi Bundling"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[p&&e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-xs font-medium text-gray-600",children:[e.jsx(ne,{className:"h-3 w-3"}),"Batas Pendaftaran"]}),e.jsx("p",{className:`text-sm font-medium ${w?"text-red-600":"text-gray-900"}`,children:x(p,"dd MMMM yyyy",{locale:o})}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Pukul ",x(p,"HH:mm",{locale:o})," WIB"]}),w&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Pendaftaran sudah ditutup"})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-xs font-medium text-gray-600",children:[e.jsx(L,{className:"h-3 w-3"}),"Total Item"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[s.bundle_items.length," item"]}),e.jsxs("div",{className:"mt-2 flex gap-1",children:[a.courses.length>0&&e.jsxs(r,{variant:"outline",className:"text-xs",children:[a.courses.length," Course"]}),a.bootcamps.length>0&&e.jsxs(r,{variant:"outline",className:"text-xs",children:[a.bootcamps.length," Bootcamp"]}),a.webinars.length>0&&e.jsxs(r,{variant:"outline",className:"text-xs",children:[a.webinars.length," Webinar"]})]})]}),e.jsx(B,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"Slug:"}),e.jsx("code",{className:"text-primary rounded bg-gray-100 px-1.5 py-0.5 text-xs",children:s.slug})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"Dibuat:"}),e.jsx("span",{className:"text-xs",children:x(new Date(s.created_at),"dd MMM yyyy",{locale:o})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"Diperbarui:"}),e.jsx("span",{className:"text-xs",children:x(new Date(s.updated_at),"dd MMM yyyy",{locale:o})})]})]})]})]})]})]})]})}export{xs as default};
