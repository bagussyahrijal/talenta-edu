import{r as u,j as e,L as ue,S as xe}from"./app-CYILbaoi.js";import{A as U,a as B,b as q}from"./avatar-D4dYc5Sq.js";import{B as x}from"./button-CLlJLTlY.js";import{C as w}from"./calendar-BZq6qPrg.js";import{C as ge}from"./checkbox-DPU1BMAL.js";import{C as G,a as H,b as K,c as V,d as J,e as Q}from"./command-BNan8g_s.js";import{u as je,F as ve,a as l,b as c,c as m,d as g,e as d,f as v}from"./form-B6atDpSa.js";import{I as h}from"./input-oXmwVgH7.js";import{L as fe}from"./label-CBpEaKXy.js";import{P as f,a as k,b}from"./popover-lImYfTEl.js";import{S as ke}from"./switch-D2pMuFlz.js";import{T as X}from"./textarea-OFhD6pZ0.js";import{u as be}from"./use-initials-C2FFciVR.js";import{A as Ne}from"./admin-layout-BjzJrLRA.js";import{c as N,r as Z,p as ee}from"./utils-D70Tm4tr.js";import{s as Se,o as Ce,c as ye,n as S,b as p,a as we}from"./types-DIvtpE3M.js";import{E as De}from"./Editor-BPkE0xhe.js";import{t as ae}from"./index-cBsCYfZr.js";import{B as _e}from"./book-marked-l-ia4kPr.js";import{C as te}from"./chevrons-up-down-LV_RtKod.js";import{C as se}from"./check-CRunFCf6.js";import{C as $e}from"./calendar-fold-ChgiaeQa.js";import{C as D}from"./chevron-down-BmUU8g9g.js";import{U as Fe}from"./user-round-BpDZIown.js";import"./index-BAlv0roY.js";import"./index-DQ7lSK2h.js";import"./index-3tGqSjMC.js";import"./index-DMiO1qAw.js";import"./index-Dmf8IhCC.js";import"./format-CNjBDjOL.js";import"./chevron-left-BbtqFm9P.js";import"./createLucideIcon-GsIBX49w.js";import"./chevron-right-CqJIwGCr.js";import"./index-BkgLKw5P.js";import"./index-DTJuQ5a-.js";import"./index-FVdKASAH.js";import"./index-WgeQRLOk.js";import"./Combination-j_brszW9.js";import"./index-BbAmjduH.js";import"./floating-ui.react-dom-0bYVS00x.js";import"./dialog-DxQVzYhC.js";import"./x-CztZCKWT.js";import"./search-JXoM8PXj.js";import"./sonner-CLUI3nWH.js";import"./breadcrumbs-CJXnIlNK.js";import"./tooltip-CDEoEIuX.js";import"./index-CKqWFvSI.js";import"./dropdown-menu-BWgy41d2.js";import"./index-DGU35iqQ.js";import"./user-DXETfz_d.js";import"./app-sidebar-header-BVO0BQeh.js";import"./user-check-CE2LL8NY.js";import"./users-D_gNsYha.js";import"./presentation-DJRnJVlR.js";import"./gift-mpdk4TWt.js";import"./banknote-IH4cxJsn.js";import"./dollar-sign-BDlGQpeo.js";import"./file-text-KF7Ya-NO.js";import"./index-BljQCQMj.js";const Te=Ce({user_id:p().nonempty("Mentor harus dipilih"),title:p().nonempty("Judul harus diisi"),category_id:p().nonempty("Kategori harus dipilih"),description:p().nullable(),benefits:p().nullable(),thumbnail:we().nullable(),start_time:p(),end_time:p(),registration_deadline:p(),strikethrough_price:S().min(0),price:S().min(0),quota:S().min(0),group_url:p().nullable(),batch:S().min(0),tools:ye(p()).optional()}).refine(s=>s.strikethrough_price>0?s.strikethrough_price>s.price:!0,{message:"Harga coret harus lebih besar dari harga normal.",path:["strikethrough_price"]});function Oa({webinar:s,categories:_,tools:re,mentors:$}){var A,Y,z;const F=be(),[ne,T]=u.useState(!1),[ie,M]=u.useState(!1),[oe,P]=u.useState(!1),[le,I]=u.useState(!1),[ce,E]=u.useState(!1),[L,me]=u.useState(s.strikethrough_price>0),[O,W]=u.useState(null),[de,C]=u.useState(!1),pe=[{title:"Webinar",href:route("webinars.index")},{title:s.title,href:route("webinars.show",{webinar:s.id})},{title:"Edit Webinar",href:route("webinars.edit",{webinar:s.id})}],n=je({resolver:Se(Te),defaultValues:{user_id:s.user_id,title:s.title??"",category_id:s.category_id??"",description:s.description??"",benefits:s.benefits??"",thumbnail:"",start_time:typeof s.start_time=="string"?s.start_time:((A=s.start_time)==null?void 0:A.toISOString())??"",end_time:typeof s.end_time=="string"?s.end_time:((Y=s.end_time)==null?void 0:Y.toISOString())??"",registration_deadline:typeof s.registration_deadline=="string"?s.registration_deadline:((z=s.registration_deadline)==null?void 0:z.toISOString())??"",strikethrough_price:s.strikethrough_price??0,price:s.price??0,quota:s.quota??0,group_url:s.group_url??"",batch:s.batch??1,tools:s.tools?s.tools.map(a=>a.id):[]}});function he(a){xe.post(route("webinars.update",{webinar:s.id}),{...a,_method:"PUT"},{forceFormData:!0})}const j=$.find(a=>a.id===n.watch("user_id"));return e.jsxs(Ne,{breadcrumbs:pe,children:[e.jsx(ue,{title:`Edit Webinar - ${s.title}`}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:["Edit Webinar ",s.title]}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:'Silakan isi form di bawah ini untuk mengedit webinar. Setelah selesai, klik tombol "Simpan Draft" untuk menyimpan perubahan sebagai draft.'}),e.jsx(ve,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(he),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Informasi Webinar"})]}),e.jsx(l,{control:n.control,name:"title",render:({field:a})=>e.jsxs(c,{children:[e.jsxs(m,{children:["Judul Webinar ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{children:e.jsx(h,{placeholder:"Masukkan judul webinar",...a,autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"category_id",render:({field:a})=>{var t;return e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(f,{open:ne,onOpenChange:T,children:[e.jsx(k,{asChild:!0,children:e.jsx(g,{children:e.jsxs(x,{variant:"outline",role:"combobox",className:N("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(t=_.find(r=>r.id===a.value))==null?void 0:t.name:"Pilih kategori",e.jsx("span",{className:"sr-only",children:"Pilih kategori"}),e.jsx(te,{className:"opacity-50"})]})})}),e.jsx(b,{className:"p-0",children:e.jsxs(G,{children:[e.jsx(H,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(K,{children:[e.jsx(V,{children:"Tidak ada kategori ditemukan."}),e.jsx(J,{children:_.map(r=>e.jsxs(Q,{value:r.name,onSelect:()=>{n.setValue("category_id",r.id),T(!1)},children:[r.name,e.jsx(se,{className:N("ml-auto",r.id===a.value?"opacity-100":"opacity-0")})]},r.id))})]})]})})]}),e.jsx(d,{})]})}}),e.jsx(l,{control:n.control,name:"tools",render:()=>e.jsxs(c,{children:[e.jsx(m,{children:"Tools yang Digunakan"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:re.map(a=>e.jsx(l,{control:n.control,name:"tools",render:({field:t})=>{var r;return e.jsxs(c,{className:"flex flex-row items-center gap-2 space-y-0",children:[e.jsx(g,{children:e.jsx(ge,{checked:(r=t.value)==null?void 0:r.includes(a.id),onCheckedChange:o=>{var i;o?t.onChange([...t.value??[],a.id]):t.onChange((i=t.value)==null?void 0:i.filter(y=>y!==a.id))}})}),e.jsx(m,{className:"text-sm font-normal",children:a.name})]})}},a.id))}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"description",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Deskripsi Lengkap"}),e.jsx(X,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi lengkap",autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"thumbnail",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Thumbnail (File Upload)"}),e.jsx("img",{src:O||(s.thumbnail?`/storage/${s.thumbnail}`:"/assets/images/placeholder.png"),alt:s.title,className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),e.jsx(h,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg",className:de?"border-red-500 focus-visible:ring-red-500":"",onChange:t=>{var o;const r=((o=t.target.files)==null?void 0:o[0])??null;if(r){if(!["image/png","image/jpeg","image/jpg"].includes(r.type)){C(!0),ae("Gambar harus png, jpg, atau jpeg");return}if(r.size>2*1024*1024){C(!0),ae("Ukuran file maksimal 2MB!");return}}if(C(!1),a.onChange(r),r){const i=new FileReader;i.onload=y=>{var R;return W((R=y.target)==null?void 0:R.result)},i.readAsDataURL(r)}else W(null)}}),e.jsx(v,{className:"ms-1",children:"Upload Icon. Format: PNG atau JPG Max 2 Mb"}),e.jsx(d,{})]})}),e.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{id:"show-strikethrough",checked:L,onCheckedChange:a=>{me(a),a||n.setValue("strikethrough_price",0)}}),e.jsx(fe,{htmlFor:"show-strikethrough",children:"Aktifkan Harga Coret (Opsional)"})]}),L&&e.jsx(l,{control:n.control,name:"strikethrough_price",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Harga Coret"}),e.jsx(h,{...a,type:"text",placeholder:"Rp 0",value:Z.format(a.value||0),onChange:t=>a.onChange(ee(t.target.value)),autoComplete:"off"}),e.jsx(v,{children:"Harga asli yang akan ditampilkan tercoret."}),e.jsx(d,{})]})})]}),e.jsx(l,{control:n.control,name:"price",render:({field:a})=>e.jsxs(c,{children:[e.jsxs(m,{children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(h,{...a,type:"text",placeholder:"Masukkan harga kursus",value:Z.format(a.value||0),onChange:t=>a.onChange(ee(t.target.value)),autoComplete:"off"}),e.jsx(v,{className:"ms-1",children:"Isi 0 untuk harga webinar gratis"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"batch",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Batch"}),e.jsx(g,{children:e.jsx(h,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan batch",autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"quota",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Kuota Peserta"}),e.jsx(g,{children:e.jsx(h,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan kuota peserta",autoComplete:"off"})}),e.jsx(v,{className:"ms-1",children:"Isi 0 untuk kuota tak terbatas"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"group_url",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Link Group Peserta"}),e.jsx(X,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan link grup peserta",autoComplete:"off"}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{size:16}),e.jsx("h3",{className:"font-medium",children:"Tanggal dan Informasi Pemateri"})]}),e.jsx(l,{control:n.control,name:"start_time",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Waktu Mulai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(f,{open:oe,onOpenChange:P,children:[e.jsx(k,{asChild:!0,children:e.jsxs(x,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(D,{})]})}),e.jsx(b,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(w,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",endMonth:new Date(new Date().getFullYear()+10,11),onSelect:t=>{if(!t)return;const o=(a.value?new Date(a.value):new Date).toTimeString().slice(0,8)||"00:00:00",i=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;a.onChange(`${i}T${o}`),P(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(h,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const r=a.value?new Date(a.value):new Date,o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,i=t.target.value||"00:00";a.onChange(`${o}T${i}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"end_time",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Waktu Selesai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(f,{open:le,onOpenChange:I,children:[e.jsx(k,{asChild:!0,children:e.jsxs(x,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(D,{})]})}),e.jsx(b,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(w,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",endMonth:new Date(new Date().getFullYear()+10,11),onSelect:t=>{const o=(a.value?new Date(a.value):new Date).toTimeString().split(" ")[0],i=t?`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`:"";a.onChange(i&&o?`${i}T${o}`:""),I(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(h,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const r=a.value?new Date(a.value):new Date,o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,i=t.target.value||"00:00";a.onChange(`${o}T${i}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"registration_deadline",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Deadline Pendaftaran ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(f,{open:ce,onOpenChange:E,children:[e.jsx(k,{asChild:!0,children:e.jsxs(x,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(D,{})]})}),e.jsx(b,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(w,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",endMonth:new Date(new Date().getFullYear()+10,11),onSelect:t=>{const o=(a.value?new Date(a.value):new Date).toTimeString().split(" ")[0],i=t?`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`:"";a.onChange(i&&o?`${i}T${o}`:""),E(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(h,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const r=a.value?new Date(a.value):new Date,o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,i=t.target.value||"00:00";a.onChange(`${o}T${i}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"user_id",render:({field:a})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsxs(m,{children:["Mentor / Pemateri ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(f,{open:ie,onOpenChange:M,children:[e.jsx(k,{asChild:!0,children:e.jsx(g,{children:e.jsxs(x,{variant:"outline",role:"combobox",className:N("justify-between",!a.value&&"text-muted-foreground"),children:[j?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(U,{className:"h-6 w-6",children:[e.jsx(B,{src:j.avatar,alt:j.name}),e.jsx(q,{className:"text-xs",children:F(j.name)})]}),e.jsx("span",{children:j.name})]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Pilih mentor"]}),e.jsx(te,{className:"opacity-50"})]})})}),e.jsx(b,{className:"w-[400px] p-0",children:e.jsxs(G,{children:[e.jsx(H,{placeholder:"Cari mentor...",className:"h-9"}),e.jsxs(K,{children:[e.jsx(V,{children:"Tidak ada mentor ditemukan."}),e.jsx(J,{children:$.map(t=>e.jsxs(Q,{value:t.name,onSelect:()=>{n.setValue("user_id",t.id),M(!1)},className:"flex items-start gap-2 py-2",children:[e.jsxs(U,{className:"mt-0.5 h-8 w-8",children:[e.jsx(B,{src:t.avatar,alt:t.name}),e.jsx(q,{className:"text-xs",children:F(t.name)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:t.name}),t.bio&&e.jsx("p",{className:"text-muted-foreground line-clamp-1 text-xs",children:t.bio})]}),e.jsx(se,{className:N("mt-1 ml-auto",t.id===a.value?"opacity-100":"opacity-0")})]},t.id))})]})]})})]}),e.jsx(v,{children:"Pilih mentor yang akan menjadi pemateri webinar ini"}),e.jsx(d,{})]})}),e.jsx(l,{control:n.control,name:"benefits",render:({field:a})=>e.jsxs(c,{children:[e.jsx(m,{children:"Benefit Mengikuti Webinar"}),e.jsx(De,{apiKey:"c7quf44sjov5dzvyzvgh4sryhheoi9t6vikfbzqk61pzpi77",value:a.value??"",onEditorChange:t=>a.onChange(t),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],onboarding:!1,toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}],height:300}}),e.jsx(d,{})]})})]}),e.jsx(x,{type:"submit",className:"hover:cursor-pointer",children:"Simpan Perubahan"})]})})]})]})}export{Oa as default};
