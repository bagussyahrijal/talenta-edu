import{r as D,m as A,j as e,L as w,$ as j,S as K}from"./app-DbpzdwFL.js";import{B as n}from"./button-nsSqORs2.js";import{D as L,b as _,g as z,c as F,d as $}from"./dialog-CupH4Hmp.js";import{T as E}from"./textarea-1lTExOUA.js";import{S as b}from"./star-6W2Ar45b.js";import{U as S}from"./user-layout-BGVxSrPd.js";import{A as y}from"./arrow-left-fki0sEH7.js";import{A as N}from"./award-DmQ31JnK.js";import{C as R}from"./circle-check-big-BY52VMjX.js";import{B as T}from"./badge-check-CZ8-4okF.js";import{D as C}from"./download-p14bUi2E.js";import{E as P}from"./eye-ZoRFIM7v.js";/* empty css            */import"./index-muyUwSbg.js";import"./index-BKZ60sTg.js";import"./utils-t30SwFLs.js";import"./index-DLFvmWB3.js";import"./index-BNGjsBO4.js";import"./Combination-BfBk5v_5.js";import"./x-Ck5JSsba.js";import"./createLucideIcon-C4hA1fDf.js";import"./sonner-BVDcOtMc.js";import"./index-adnqAMSx.js";import"./breadcrumbs-BB8Ncwy_.js";import"./tooltip-BP3-rQs1.js";import"./index-BBYaHc3j.js";import"./index-BrWH3fgz.js";import"./index-Czgf-KsJ.js";import"./floating-ui.react-dom-GTqUnYaj.js";import"./index-DQnLm8Kj.js";import"./index-BG9WF58p.js";import"./dropdown-menu-2YdbIEK2.js";import"./index-DWIaYFCs.js";import"./check-BUnQtbm6.js";import"./avatar-COyTLtDN.js";import"./use-initials-QSx-oft4.js";import"./user-CtC4W_DT.js";import"./chevron-right-B5kzfHcg.js";import"./icon-DkYG_jat.js";import"./index-BlfYzGKu.js";import"./chevron-down-qOg5Thj1.js";import"./popover-ByDDj6AP.js";import"./badge-DhvWYlS3.js";import"./command-Dld5evAu.js";import"./search-Bb5VI_Ga.js";import"./clock-JumJjszk.js";import"./monitor-play-BpYKtXm7.js";import"./presentation-CbszFwHd.js";import"./house-CctVEg_T.js";import"./file-text-CQepP0w_.js";function M({isOpen:o,onClose:l,course:i}){const[m,p]=D.useState(0),{data:t,setData:a,post:s,processing:d,errors:c,reset:g}=A({rating:0,review:""}),h=r=>{r.preventDefault(),s(route("course.rating.store",i.id),{onSuccess:()=>{g(),l()}})},f=r=>{a("rating",r)},u=r=>{p(r)},x=()=>{p(0)},k=r=>{const B=m||t.rating;return r<=B?"text-yellow-400":"text-gray-300"},v=()=>{g(),l()};return e.jsx(L,{open:o,onOpenChange:v,children:e.jsxs(_,{className:"max-w-2xl",children:[e.jsxs(z,{children:[e.jsx(F,{className:"text-xl font-bold",children:"Berikan Rating & Review"}),e.jsx($,{children:"Bagikan pengalaman Anda mengikuti kelas ini"})]}),e.jsx("div",{className:"mb-4 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:i.thumbnail?`/storage/${i.thumbnail}`:"/assets/images/placeholder.png",alt:i.title,className:"h-16 w-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:i.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.description})]})]})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium",children:["Rating ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(r=>e.jsx("button",{type:"button",onClick:()=>f(r),onMouseEnter:()=>u(r),onMouseLeave:x,className:"transition-colors duration-150",children:e.jsx(b,{className:`h-8 w-8 ${k(r)} ${r<=(m||t.rating)?"fill-current":""}`})},r)),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:t.rating>0&&e.jsxs(e.Fragment,{children:[t.rating,"/5 -"," ",t.rating===1?"Sangat Buruk":t.rating===2?"Buruk":t.rating===3?"Cukup":t.rating===4?"Baik":"Sangat Baik"]})})]}),c.rating&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.rating})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium",children:["Review ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(E,{value:t.review,onChange:r=>a("review",r.target.value),placeholder:"Ceritakan pengalaman Anda mengikuti kelas ini. Apa yang Anda sukai? Apa yang bisa diperbaiki?",rows:4,className:"resize-none"}),e.jsxs("div",{className:"mt-1 flex justify-between text-sm text-gray-500",children:[e.jsx("span",{children:c.review&&e.jsx("span",{className:"text-red-600",children:c.review})}),e.jsxs("span",{children:[t.review.length,"/1000"]})]})]}),e.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3 dark:border-green-800 dark:bg-green-900/20",children:e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("strong",{children:"Catatan:"})," Setelah Anda mengirim rating dan review, sertifikat kelulusan akan langsung tersedia untuk diunduh."]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(n,{type:"button",variant:"outline",className:"flex-1",onClick:v,disabled:d,children:"Batal"}),e.jsx(n,{type:"submit",className:"flex-1",disabled:d||t.rating===0||t.review.length<1,children:d?"Mengirim...":"Kirim Rating"})]})]})]})})}function U(o){if(!o)return[];const l=o.match(/<li>(.*?)<\/li>/g);return l?l.map(i=>i.replace(/<\/?li>/g,"").trim()):[]}function Te({course:o,courseRating:l,certificate:i,certificateParticipant:m}){var u;const[p,t]=D.useState(!1);if(!o)return e.jsxs(S,{children:[e.jsx(w,{title:"Kelas Tidak Ditemukan"}),e.jsxs("div",{className:"flex h-screen items-center justify-center",children:[e.jsx("p",{children:"Detail kelas tidak dapat ditemukan."}),e.jsx(n,{className:"mt-4 rounded-full",variant:"secondary",asChild:!0,children:e.jsxs(j,{href:"/profile/my-courses",children:[e.jsx(y,{})," Kembali Ke Kelas Saya"]})})]})]});const a=(u=o.course_items)==null?void 0:u[0],s=a==null?void 0:a.course,d=o.status,c=U(s==null?void 0:s.key_points),g=(a==null?void 0:a.progress)===100,h=i&&g&&l&&d==="paid",f=()=>!a||a.progress!==100?null:l?l&&!h?e.jsx("div",{className:"mb-6 rounded-lg border border-yellow-200 bg-gradient-to-r from-yellow-50 to-yellow-100 p-4 dark:border-yellow-700 dark:from-yellow-900/20 dark:to-yellow-800/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-r from-yellow-400 to-yellow-600",children:e.jsx(N,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"ðŸŽ‰ Terima kasih atas rating Anda!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i?"Sertifikat sedang diproses.":"Sertifikat belum dibuat untuk course ini."}),e.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Rating Anda:"}),[1,2,3,4,5].map(x=>e.jsx(b,{className:`h-3 w-3 ${x<=l.rating?"fill-current text-yellow-400":"text-gray-300"}`},x)),e.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["(",l.rating,"/5)"]})]})]})]}),e.jsxs(n,{size:"sm",disabled:!0,children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),i?"Menunggu Sertifikat":"Sertifikat Belum Tersedia"]})]})}):h?e.jsxs("div",{className:"mb-6 rounded-lg border border-green-200 bg-gradient-to-r from-green-50 to-green-100 p-6 dark:border-green-700 dark:from-green-900/20 dark:to-green-800/20",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-r from-green-400 to-green-600",children:e.jsx(N,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"ðŸŽ‰ Sertifikat Kelulusan Tersedia!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Anda telah berhasil menyelesaikan kelas ini dan sertifikat sudah siap diunduh"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[m&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["No. Sertifikat: ",String(m.certificate_number).padStart(4,"0"),"/",i.certificate_number]}),e.jsx(j,{href:route("certificate.participant.detail",{code:m.certificate_code}),className:"text-sm text-green-600 underline hover:text-green-800 dark:text-green-400",children:"Lihat Detail Sertifikat"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2",children:[e.jsx(n,{className:"w-full",asChild:!0,children:e.jsxs("a",{href:route("profile.course.certificate",{course:s.slug}),target:"_blank",children:[e.jsx(C,{size:16,className:"mr-2"}),"Unduh Sertifikat"]})}),e.jsx(n,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs("a",{href:route("profile.course.certificate.preview",{course:s.slug}),target:"_blank",children:[e.jsx(P,{size:16,className:"mr-2"}),"Lihat Preview"]})})]})]})]}):null:e.jsx("div",{className:"mb-6 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-blue-100 p-4 dark:border-blue-700 dark:from-blue-900/20 dark:to-blue-800/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-r from-blue-400 to-blue-600",children:e.jsx(b,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"ðŸŽ‰ Selamat! Anda telah menyelesaikan kelas ini"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Berikan rating dan review untuk mendapatkan sertifikat kelulusan"})]})]}),e.jsxs(n,{size:"sm",className:"border-none bg-gradient-to-r from-blue-400 to-blue-600 text-white shadow-lg hover:from-blue-500 hover:to-blue-700",onClick:()=>t(!0),children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Beri Rating"]})]})});return e.jsxs(S,{children:[e.jsx(w,{title:(s==null?void 0:s.title)||"Detail Kelas"}),s?e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"to-background from-background via-tertiary dark:via-background dark:to-background relative bg-gradient-to-b py-12 text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"pointer-events-none absolute top-1/2 left-1/2 z-0 flex -translate-x-1/2 -translate-y-1/2 animate-spin items-center gap-8 duration-[10s]",children:[e.jsx("div",{className:"bg-primary h-[300px] w-[300px] rounded-full blur-[200px]"}),e.jsx("div",{className:"bg-secondary h-[300px] w-[300px] rounded-full blur-[200px]"})]}),e.jsxs("div",{className:"relative mx-auto max-w-7xl px-4 text-center",children:[e.jsx(n,{className:"top-0 left-4 mb-4 rounded-full md:absolute md:mb-0",variant:"secondary",asChild:!0,children:e.jsxs(j,{href:"/profile/my-courses",children:[e.jsx(y,{})," Kembali Ke Kelas Saya"]})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center md:flex-row md:gap-4",children:[e.jsxs("span",{className:"text-primary border-primary bg-background mb-4 w-fit rounded-full border bg-gradient-to-t from-[#D9E5FF] to-white px-4 py-1 text-sm font-medium shadow-xs",children:["ðŸ“Œ Enrolled in"," ",a&&new Date(a.created_at).toLocaleDateString("id-ID",{month:"long",year:"numeric"})]}),e.jsxs("span",{className:"text-secondary border-secondary bg-background mb-4 inline-block rounded-full border bg-gradient-to-t from-[#FED6AD] to-white px-3 py-1 text-sm font-medium shadow-xs hover:text-[#FF925B]",children:["ðŸŽ® Level ",e.jsx("span",{className:"capitalize",children:s.level})]}),h?e.jsxs("span",{className:"mb-4 flex w-fit items-center gap-2 rounded-full border border-green-800 bg-green-100 px-4 py-1 text-sm font-medium text-green-800 shadow-xs",children:[e.jsx(N,{size:16}),"Sertifikat Tersedia"]}):null]}),e.jsx("h1",{className:"mx-auto mb-4 max-w-2xl text-4xl leading-tight font-bold italic sm:text-5xl",children:s.title}),e.jsx("p",{className:"mb-6 text-lg text-gray-600 dark:text-gray-400",children:s.description}),e.jsx("div",{className:"flex items-center justify-center gap-4",children:e.jsx("span",{className:`font-semibold ${d==="paid"?"text-green-600":"text-red-600"}`,children:d!=="paid"&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"block text-red-600",children:["âš ï¸ Status Pembayaran: ",d.toUpperCase()]}),e.jsx("span",{className:"block text-sm text-gray-600",children:d==="failed"?"Pembayaran gagal atau dibatalkan. Silakan lakukan pembelian ulang.":"Selesaikan pembayaran untuk mengakses kelas."})]})})})]})]})]}),e.jsx("section",{className:"mx-auto mb-12 w-full max-w-7xl px-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"col-span-2 flex h-full flex-col rounded-xl bg-white p-6 shadow dark:bg-zinc-800",children:[f(),e.jsx("h1",{className:"text-lg font-semibold",children:"Progres Kamu"}),e.jsxs("div",{className:"mt-4 mb-6",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Progres Pembelajaran"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:[(a==null?void 0:a.progress)||0,"%"]})]}),e.jsx("div",{className:"h-3 w-full rounded-full bg-gray-200 shadow-inner dark:bg-gray-700",children:e.jsx("div",{className:`relative h-3 rounded-full transition-all duration-500 ease-out ${((a==null?void 0:a.progress)||0)===100?"bg-gradient-to-r from-green-400 via-green-500 to-green-600 shadow-lg":"bg-gradient-to-r from-blue-400 via-blue-500 to-blue-600"}`,style:{width:`${(a==null?void 0:a.progress)||0}%`},children:((a==null?void 0:a.progress)||0)>10&&e.jsx("div",{className:"absolute inset-0 animate-pulse rounded-full bg-white/20"})})})]}),e.jsxs("div",{className:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status Penyelesaian:"}),e.jsx("div",{className:"flex items-center gap-2",children:a!=null&&a.completed_at?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-sm font-semibold text-green-700 dark:text-green-400",children:"Selesai"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Sedang Berlangsung"})]})})]}),(a==null?void 0:a.completed_at)&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Diselesaikan pada:"," ",new Date(a.completed_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("h1",{className:"text-lg font-semibold",children:"Poin Utama"}),e.jsx("ul",{className:"mt-4 space-y-2 text-sm text-gray-600 dark:text-gray-400",children:c.map((x,k)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(T,{size:18,className:"mt-1 min-w-6 text-green-600"}),e.jsx("p",{children:x})]},k))})]}),e.jsx("div",{className:"col-span-1 space-y-4",children:e.jsxs("div",{className:"flex h-full flex-col rounded-xl bg-white p-6 shadow dark:bg-zinc-800",children:[e.jsx("h2",{className:"mb-4 text-center font-semibold",children:s.title}),e.jsx("img",{src:s.thumbnail?`/storage/${s.thumbnail}`:"/assets/images/placeholder.png",alt:s.title,className:"aspect-video rounded-xl object-cover shadow-lg"}),e.jsx("p",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400",children:s.short_description}),e.jsx(n,{className:"mt-2 w-full",onClick:()=>K.get(route("learn.course.detail",{course:s.slug})),children:g?"Lihat Kembali Materi":"Lanjutkan Belajar"})]})})]})})]}):e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"mb-4",children:"Detail kelas tidak dapat ditemukan."}),e.jsx(n,{className:"rounded-full",variant:"secondary",asChild:!0,children:e.jsxs(j,{href:"/profile/my-courses",children:[e.jsx(y,{className:"mr-2 h-4 w-4"})," Kembali Ke Kelas Saya"]})})]})}),s&&e.jsx(M,{isOpen:p,onClose:()=>t(!1),course:{id:s.id,title:s.title,thumbnail:s.thumbnail,description:s.description||s.short_description||""}})]})}export{Te as default};
