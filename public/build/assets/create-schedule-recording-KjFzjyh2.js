import{r as s,j as e,S as j}from"./app-BhEHCJ0Z.js";import{B as u}from"./button-Bf02en0e.js";import{D as v,a as y,b as S,g as D,c as L,d as N,e as C}from"./dialog-CQjww_f-.js";import{I as E}from"./input-Cv8dKMSv.js";import{L as x}from"./label-BoETaLWF.js";import{t as I}from"./index-QDM4CwkZ.js";import{L as T}from"./link-DRihOSCx.js";/* empty css            */import"./index--85esZ8J.js";import"./index-CxD2d-sC.js";import"./utils-CuQfd7NH.js";import"./index-c8Ty0Bfe.js";import"./index-DUG2K0Yf.js";import"./Combination-B5dTcnEF.js";import"./x-BFhKaJ_s.js";import"./createLucideIcon-e1wfGRAH.js";function f(r){const n=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,t=r.match(n);return t&&t[2].length===11?t[2]:""}function q({bootcampId:r,scheduleId:n,currentRecordingUrl:t}){const[p,l]=s.useState(!1),[m,h]=s.useState(t||""),[i,c]=s.useState(!1),[b,o]=s.useState("");s.useEffect(()=>{if(h(t||""),t){const a=f(t);o(a?`https://www.youtube.com/embed/${a}`:"")}else o("")},[t,p]);const g=a=>{const d=a.target.value;if(h(d),d){const w=f(d);o(w?`https://www.youtube.com/embed/${w}`:"")}else o("")},k=a=>{if(a.preventDefault(),!m.trim()){I.error("Link rekaman tidak boleh kosong");return}c(!0),j.post(route("bootcamps.add-recording",{bootcamp:r,schedule:n}),{recording_url:m},{onSuccess:()=>{l(!1),c(!1)},onError:()=>{c(!1)}})};return e.jsxs(v,{open:p,onOpenChange:l,children:[e.jsx(y,{asChild:!0,children:e.jsxs(u,{variant:t?"outline":"default",size:"sm",className:"w-full",children:[e.jsx(T,{className:"h-4 w-4"}),t?"Edit Link Rekaman":"Tambah Link Rekaman"]})}),e.jsxs(S,{className:"sm:max-w-[600px]",children:[e.jsxs(D,{children:[e.jsx(L,{children:t?"Edit Link Rekaman":"Tambah Link Rekaman"}),e.jsx(N,{children:"Masukkan link YouTube untuk rekaman sesi bootcamp ini. Link akan otomatis ditampilkan untuk peserta yang terdaftar."})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"recording_url",children:"Link YouTube Rekaman"}),e.jsx(E,{id:"recording_url",placeholder:"https://www.youtube.com/watch?v=...",value:m,onChange:g,disabled:i}),e.jsx("p",{className:"text-xs text-gray-500",children:"Contoh: https://www.youtube.com/watch?v=dQw4w9WgXcQ atau https://youtu.be/dQw4w9WgXcQ"})]}),b&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Preview Video"}),e.jsx("div",{className:"w-full",children:e.jsx("iframe",{className:"aspect-video w-full rounded-lg border",src:b,title:"YouTube Preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),e.jsxs(C,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:i,children:"Batal"}),e.jsx(u,{type:"submit",disabled:i,children:i?"Menyimpan...":"Simpan"})]})]})]})]})}export{q as default};
