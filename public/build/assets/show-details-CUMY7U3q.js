import{K as P,r as w,j as e,S as I}from"./app-DOw8WGsB.js";import{D as A}from"./delete-dialog-BH-76rwr.js";import{B as p}from"./badge-Sm9WwqL0.js";import{B as f}from"./button-DcFIHW5l.js";import{I as _}from"./input-DBpy_I2t.js";import{T as U,d as R,b as l,e as a}from"./table-HdPgeTYY.js";import{u as $}from"./use-initials-djmNBn2p.js";import{r as x}from"./utils-CzjlUMdD.js";import{t as m}from"./index-BUQucj1P.js";import L from"./create-schedule-recording-DevAU_5N.js";import{L as S}from"./link-DqME6ees.js";import{E as C}from"./external-link-CAD9qRrb.js";import{T as H}from"./trash-2-C4XRGf8y.js";import{f as h}from"./format-CNjBDjOL.js";import{i as j}from"./id-BLKIQCr7.js";/* empty css            */import"./alert-dialog-BUWWcw-a.js";import"./index-H_kHB_Qu.js";import"./index-CG763c0k.js";import"./index-D3mZWvVC.js";import"./Combination-D3Fqnt-T.js";import"./index-u9BS1GnC.js";import"./dialog-O6EpwUVG.js";import"./x-DnFXZMI4.js";import"./createLucideIcon-Bib7ccfX.js";import"./label-DVaJrNeu.js";function K(s){const t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,r=s.match(t);return r&&r[2].length===11?r[2]:""}function xe({bootcamp:s}){var y;const{auth:t}=P().props,r=t.role.includes("affiliate"),[k,g]=w.useState(null),M=$(),u=w.useMemo(()=>{const i=t.user.affiliate_code,n=(c,o)=>{try{const d=new URL(c);return d.searchParams.set("ref",o),d.toString()}catch{const d=c.includes("?")?"&":"?";return`${c}${d}ref=${o}`}};return r&&i?{registrationUrl:n(s.registration_url,i),bootcampUrl:n(s.bootcamp_url,i)}:{registrationUrl:s.registration_url,bootcampUrl:s.bootcamp_url}},[s.registration_url,s.bootcamp_url,t.user.affiliate_code,r]),T=async()=>{try{await navigator.clipboard.writeText(u.registrationUrl),r?m.success("Link pendaftaran dengan kode afiliasi berhasil disalin!"):m.success("Link pendaftaran berhasil disalin!")}catch{m.error("Gagal menyalin link pendaftaran")}},B=async()=>{try{await navigator.clipboard.writeText(u.bootcampUrl),r?m.success("Link bootcamp dengan kode afiliasi berhasil disalin!"):m.success("Link bootcamp berhasil disalin!")}catch{m.error("Gagal menyalin link bootcamp")}},D=i=>{g(i),I.delete(route("bootcamps.remove-recording",{bootcamp:s.id,schedule:i}),{onSuccess:()=>{g(null)},onError:()=>{g(null)}})};return e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Share Link untuk Menerima Pendaftaran"}),r&&e.jsx("div",{className:"rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-800",children:"Mode Afiliasi"})]}),r&&e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-800 dark:bg-blue-900/20",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Link Afiliasi Otomatis"}),e.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Link di bawah sudah menyertakan kode afiliasi Anda (",t.user.affiliate_code,"). Setiap pendaftaran melalui link ini akan memberikan komisi untuk Anda."]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Link Pendaftaran ",r&&"(dengan kode afiliasi)"]}),e.jsx(_,{type:"text",value:u.registrationUrl,readOnly:!0,className:"rounded border p-2 text-sm",placeholder:"Link Pendaftaran"}),e.jsxs(f,{type:"button",onClick:T,className:"w-full hover:cursor-pointer",disabled:s.status==="draft"||s.status==="archived",children:[r?"Salin Link Afiliasi Pendaftaran":"Salin Link Pendaftaran"," ",e.jsx(S,{})]})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Link Bootcamp ",r&&"(dengan kode afiliasi)"]}),e.jsx(_,{type:"text",value:u.bootcampUrl,readOnly:!0,className:"rounded border p-2 text-sm",placeholder:"Link Bootcamp"}),e.jsxs(f,{type:"button",onClick:B,className:"w-full hover:cursor-pointer",disabled:s.status==="draft"||s.status==="archived",children:[r?"Salin Link Afiliasi Bootcamp":"Salin Link Bootcamp"," ",e.jsx(S,{})]})]})]}),s.status==="published"||s.status==="hidden"?e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:r?"Share link afiliasi diatas ke sosial media, whatsapp, tiktok, landing page, email ataupun channel penjualan lainnya untuk mendapatkan komisi dari setiap pendaftaran":"Share link diatas ke sosial media, whatsapp, tiktok, landing page, email ataupun channel penjualan lainnya untuk menerima order dan pembayaran"}):e.jsx("p",{className:"text-center text-sm text-red-500",children:"Bootcamp ini belum diterbitkan. Silahkan terbitkan bootcamp terlebih dahulu untuk membagikan link akses bootcamp."}),s.status==="hidden"&&e.jsx("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-3 dark:border-yellow-800 dark:bg-yellow-900/20",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Bootcamp Disembunyikan"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700 dark:text-yellow-300",children:"Peserta hanya dapat mengakses bootcamp melalui link langsung, namun bootcamp ini tidak akan muncul di dahsboard. Anda dapat mempublikasikan kembali bootcamp ini untuk membuatnya terlihat publik."})]})})}),r&&s.status==="published"&&e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Detail Komisi:"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Harga Bootcamp:"})," ",x.format(s.price)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rate Komisi:"})," ",t.user.commission,"%"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Komisi per Penjualan:"})," ",x.format(s.price*(t.user.commission/100))]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Kode Afiliasi:"})," ",t.user.affiliate_code]})]})]}),e.jsx(U,{children:e.jsxs(R,{children:[e.jsxs(l,{children:[e.jsx(a,{children:"Status"}),e.jsx(a,{children:(()=>{const i=s.status;let n="bg-gray-200 text-gray-800";return i==="draft"&&(n="bg-gray-200 text-gray-800"),i==="published"&&(n="bg-blue-100 text-blue-800"),i==="archived"&&(n="bg-zinc-300 text-zinc-700"),e.jsx(p,{className:`capitalize ${n} border-0`,children:i})})()})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Kategori"}),e.jsx(a,{children:(y=s.category)==null?void 0:y.name})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Nama Bootcamp"}),e.jsx(a,{children:s.title})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Harga"}),e.jsx(a,{children:s.price===0?e.jsx("span",{children:"Gratis"}):e.jsxs("span",{children:[s.strikethrough_price>0&&e.jsxs("span",{className:"text-xs text-gray-500 line-through",children:[x.format(s.strikethrough_price)," "]}),e.jsx("span",{className:"text-base font-semibold",children:x.format(s.price)})]})})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Deskripsi"}),e.jsx(a,{children:e.jsx("div",{className:"prose prose-sm max-w-md text-wrap",dangerouslySetInnerHTML:{__html:s.description??"-"}})})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Persyaratan"}),e.jsx(a,{children:e.jsx("div",{className:"prose prose-sm max-w-md text-wrap",dangerouslySetInnerHTML:{__html:s.requirements??"-"}})})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Benefit"}),e.jsx(a,{children:e.jsx("div",{className:"prose prose-sm max-w-md text-wrap",dangerouslySetInnerHTML:{__html:s.benefits??"-"}})})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Kurikulum"}),e.jsx(a,{children:e.jsx("div",{className:"prose prose-sm max-w-md text-wrap",dangerouslySetInnerHTML:{__html:s.curriculum??"-"}})})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Batch"}),e.jsx(a,{children:s.batch??"-"})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Kuota"}),e.jsx(a,{children:s.quota===0?"Tak terbatas":`${s.quota} orang`})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Waktu Pelaksanaan"}),e.jsxs(a,{children:[h(new Date(s.start_date),"dd MMMM yyyy",{locale:j})," - ",h(new Date(s.end_date),"dd MMMM yyyy",{locale:j})]})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Jadwal & Rekaman"}),e.jsx(a,{children:s.schedules&&s.schedules.length>0?e.jsx("div",{className:"space-y-4",children:s.schedules.map((i,n)=>{var N,v;const c=new Date(i.schedule_date),o=c<new Date,d=i.recording_url?K(i.recording_url):"",b=d?`https://www.youtube.com/embed/${d}`:"";return e.jsxs("div",{className:"space-y-3 rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium",children:["Pertemuan ",n+1]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"inline-block",children:h(c,"dd MMM yyyy",{locale:j})})," • ",e.jsx("span",{className:"inline-block capitalize",children:i.day})," • ",e.jsxs("span",{children:[(N=i.start_time)==null?void 0:N.slice(0,5)," - ",(v=i.end_time)==null?void 0:v.slice(0,5)," WIB"]})]})]}),e.jsx("div",{children:o?e.jsx(p,{className:"text-xs",children:"Selesai"}):e.jsx(p,{className:"text-xs",children:"Akan Datang"})})]}),e.jsx("div",{className:"space-y-2",children:i.recording_url?e.jsxs(e.Fragment,{children:[b&&e.jsx("div",{className:"w-full",children:e.jsx("iframe",{className:"aspect-video w-full rounded-lg border",src:b,title:`Recording Pertemuan ${n+1}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("a",{href:i.recording_url,target:"_blank",rel:"noopener noreferrer",className:"flex flex-1 items-center gap-1 text-sm text-blue-600 hover:underline",children:[e.jsx(C,{className:"h-3 w-3"}),"Lihat di YouTube"]})}),!r&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{bootcampId:s.id,scheduleId:i.id,currentRecordingUrl:i.recording_url}),e.jsx(A,{trigger:e.jsxs(f,{size:"sm",variant:"destructive",disabled:k===i.id,className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),k===i.id?"Menghapus...":"Hapus"]}),title:"Apakah Anda yakin ingin menghapus link rekaman ini?",itemName:`Rekaman Pertemuan ${n+1}`,onConfirm:()=>D(i.id)})]})]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[o&&e.jsx("div",{className:"rounded-lg bg-amber-50 p-2 text-xs text-amber-700",children:"Sesi sudah selesai - Link rekaman belum diupload"}),!r&&e.jsx(L,{bootcampId:s.id,scheduleId:i.id,currentRecordingUrl:null})]})})]},n)})}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Belum ada jadwal."})})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Deadline Pendaftaran"}),e.jsx(a,{children:h(new Date(s.registration_deadline),"dd MMMM yyyy HH:mm",{locale:j})})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Link Group Peserta"}),e.jsx(a,{children:s.group_url??"-"})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Pemateri"}),e.jsx(a,{children:s.user?e.jsxs("div",{className:"flex items-center gap-3",children:[s.user.avatar?e.jsx("img",{src:`/storage/${s.user.avatar}`,alt:s.user.name,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 text-gray-600",children:M(s.user.name)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.user.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.user.bio??"Tidak ada bio"})]})]}):"-"})]}),e.jsxs(l,{children:[e.jsx(a,{children:"Pengumpulan Link Submission"}),e.jsx(a,{children:s.has_submission_link?"Ada":"Tidak"})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Tools yang Digunakan:"}),s.tools&&s.tools.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-4 md:grid-cols-4 lg:grid-cols-5",children:s.tools.map(i=>e.jsxs("div",{children:[e.jsx("img",{src:i.icon?`/storage/${i.icon}`:"/assets/images/placeholder.png",alt:"Tool Icon",className:"mx-auto my-1 mt-2 h-24 rounded border object-cover"}),e.jsx("h4",{className:"text-center text-sm font-medium",children:i.name})]},i.name))}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Belum ada tools yang ditentukan."})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Thumbnail:"}),e.jsx("img",{src:s.thumbnail?`/storage/${s.thumbnail}`:"/assets/images/placeholder.png",alt:s.title,className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),s.thumbnail?null:e.jsx("span",{className:"text-muted-foreground text-sm",children:"Thumbnail belum diunggah."})]})]})}export{xe as default};
