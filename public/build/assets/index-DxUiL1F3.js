import{K as Re,r as m,m as Le,b as q,j as e,L as he,$ as Z,S as Be}from"./app-CYILbaoi.js";import{I as ee}from"./input-error-CsDkJUcI.js";import{B as y}from"./button-CLlJLTlY.js";import{C as Ie}from"./checkbox-DPU1BMAL.js";import{I as S}from"./input-oXmwVgH7.js";import{L as w}from"./label-CBpEaKXy.js";import{S as ae}from"./separator-C5xnqV6S.js";import{T as Ae}from"./sonner-CLUI3nWH.js";import{t as i}from"./index-cBsCYfZr.js";import{U as Me}from"./user-DXETfz_d.js";import{S as qe}from"./shopping-cart-DOJHEfXg.js";import{C as ze}from"./calendar-HnJVVQFp.js";import{L as fe}from"./loader-circle-CANjMPp6.js";import{C as te}from"./check-CRunFCf6.js";import{R as ke}from"./refresh-cw-BXqgAqbD.js";import{B as Ge}from"./badge-check-B97fwRia.js";import{X as je}from"./x-CztZCKWT.js";import{H as Oe}from"./hourglass-mThq3cdj.js";import"./utils-D70Tm4tr.js";import"./index-DMiO1qAw.js";import"./index-Dmf8IhCC.js";import"./index-DQ7lSK2h.js";import"./index-3tGqSjMC.js";import"./index-BAlv0roY.js";import"./index-BkgLKw5P.js";import"./index-DTJuQ5a-.js";import"./index-FVdKASAH.js";import"./createLucideIcon-GsIBX49w.js";function ja({bootcamp:r,hasAccess:be,pendingInvoice:c,transactionDetail:T,referralInfo:U}){var pe;const{auth:se}=Re().props,f=!!se.user,re=f&&((pe=se.user)==null?void 0:pe.phone_number),[F,oe]=m.useState(!1),[E,p]=m.useState(!1),[g,ne]=m.useState(""),[n,D]=m.useState(null),[H,le]=m.useState(!1),[$,R]=m.useState(""),[ye,ie]=m.useState(!1),[k,J]=m.useState({ig_follow_proof:null,tiktok_follow_proof:null,tag_friend_proof:null}),[z,L]=m.useState({ig_follow_proof:!1,tiktok_follow_proof:!1,tag_friend_proof:!1}),[b,N]=m.useState(!1),[K,G]=m.useState(!1),u=r.price===0,we=r.price,Ne=(n==null?void 0:n.discount_amount)||0,de=we-Ne,ce=u?0:5e3,me=u?0:de+ce,[Ue,He]=m.useState(!1),{data:l,setData:_,post:_e,processing:X,errors:W,reset:ve}=Le({name:"",email:"",phone_number:"",password:"",password_confirmation:""});m.useEffect(()=>{if(!l.email||!l.email.includes("@")){N(!1);return}const a=setTimeout(async()=>{G(!0);try{const t=await q.post("/api/check-email",{email:l.email});t.data.exists?(N(!0),_("name",t.data.name||""),_("phone_number",t.data.phone_number||"")):N(!1)}catch(t){console.error("Error checking email:",t),N(!1)}finally{G(!1)}},500);return()=>clearTimeout(a)},[l.email]);const Se=a=>{a.preventDefault(),_e(route("register"),{onFinish:()=>ve("password","password_confirmation")})};m.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("ref");t?sessionStorage.setItem("referral_code",t):U.code&&sessionStorage.setItem("referral_code",U.code)},[U]),m.useEffect(()=>{if(!g.trim()||u){D(null),R("");return}const a=setTimeout(()=>{xe()},500);return()=>clearTimeout(a)},[g]);const xe=async()=>{var a,t;if(!(!g.trim()||u)){le(!0),R("");try{const s={code:g,amount:r.price,product_type:"bootcamp",product_id:r.id};!f&&b&&l.email&&(s.email=l.email);const d=await q.post("/api/discount-codes/validate",s);d.data.valid?(D(d.data),R("")):(D(null),R(d.data.message||"Kode promo tidak valid"))}catch(s){D(null),R(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Terjadi kesalahan saat memvalidasi kode promo")}finally{le(!1)}}},ue=async()=>{try{const t=await(await fetch("/csrf-token",{method:"GET",credentials:"same-origin"})).json(),s=document.querySelector('meta[name="csrf-token"]');return s&&(s.content=t.token),t.token}catch(a){throw console.error("Failed to refresh CSRF token:",a),a}},Ce=a=>{if(a.preventDefault(),!re){alert("Profil Anda belum lengkap! Harap lengkapi nomor telepon terlebih dahulu."),window.location.href=route("profile.edit");return}if(!k.ig_follow_proof||!k.tiktok_follow_proof||!k.tag_friend_proof){alert("Harap upload semua bukti yang diperlukan!");return}p(!0);const t=new FormData;t.append("type","bootcamp"),t.append("id",r.id),t.append("ig_follow_proof",k.ig_follow_proof),t.append("tiktok_follow_proof",k.tiktok_follow_proof),t.append("tag_friend_proof",k.tag_friend_proof),Be.post(route("enroll.free"),t,{onError:s=>{console.log("Free enrollment errors:",s),alert(s.message||"Gagal mendaftar bootcamp gratis.")},onFinish:()=>{p(!1)}})},Pe=async a=>{var s,d,h;if(a.preventDefault(),!f){if(!l.email||!l.name||!l.phone_number){i.error("Lengkapi data terlebih dahulu");return}p(!0);try{if(b){const o=await q.post("/auto-login",{email:l.email,phone_number:l.phone_number});if(!o.data.success)throw new Error(o.data.message||"Login gagal. Pastikan nomor telepon sesuai dengan yang terdaftar.");i.success("Login berhasil! Menyiapkan pembayaran..."),sessionStorage.setItem("pendingCheckout",JSON.stringify({bootcampId:r.id,productType:"bootcamp",termsAccepted:F,promoCode:g,discountData:n,timestamp:Date.now()})),await new Promise(x=>setTimeout(x,1e3)),window.location.reload();return}else{const o=await q.post("/register",{name:l.name,email:l.email,phone_number:l.phone_number,password:l.phone_number,password_confirmation:l.phone_number});if(!(o.data.success||o.status===200||o.status===201))throw new Error("Registrasi gagal");i.success("Registrasi berhasil! Menyiapkan pembayaran..."),sessionStorage.setItem("pendingCheckout",JSON.stringify({bootcampId:r.id,productType:"bootcamp",termsAccepted:F,promoCode:g,discountData:n,timestamp:Date.now()})),await new Promise(x=>setTimeout(x,1e3)),window.location.reload();return}}catch(o){console.error("Login/Register error:",o),p(!1),((s=o.response)==null?void 0:s.status)===419?i.error("Sesi telah berakhir. Silakan muat ulang halaman."):i.error(((h=(d=o.response)==null?void 0:d.data)==null?void 0:h.message)||o.message||"Gagal login/registrasi");return}}if(!F&&!u){i.error("Anda harus menyetujui syarat dan ketentuan!"),p(!1);return}if(E||p(!0),u){ie(!0),p(!1);return}const t=async(o=0)=>{var B;const x=r.strikethrough_price>0?r.strikethrough_price-r.price:0,Y=(n==null?void 0:n.discount_amount)||0,C={type:"bootcamp",id:r.id,discount_amount:x+Y,nett_amount:de,total_amount:me};n!=null&&n.valid&&(C.discount_code_id=n.discount_code.id,C.discount_code_amount=n.discount_amount);try{const P=(B=document.querySelector('meta[name="csrf-token"]'))==null?void 0:B.content,j=await fetch(route("invoice.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":P||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(C)});if(j.status===419&&o<2)return console.log(`CSRF token expired, refreshing... (attempt ${o+1})`),await ue(),t(o+1);if(j.status===401&&o<2)return console.log("Unauthorized, retrying after session refresh..."),await new Promise(O=>setTimeout(O,2e3)),t(o+1);const v=await j.json();if(j.ok&&v.success)if(v.payment_url)sessionStorage.removeItem("pendingCheckout"),window.location.href=v.payment_url;else throw new Error("Payment URL not received");else throw new Error(v.message||"Gagal membuat invoice.")}catch(P){throw console.error("Payment error:",P),P}};try{await t()}catch(o){i.error(o.message||"Terjadi kesalahan saat proses pembayaran."),p(!1)}},Te=(a,t=2)=>{const s=t*1024*1024;return a.size<=s},Q=(a,t)=>{if(!t){J(s=>({...s,[a]:null})),L(s=>({...s,[a]:!1}));return}if(!Te(t,2)){L(d=>({...d,[a]:!0}));const s=document.querySelector(`input[data-field="${a}"]`);s&&(s.value=""),i.error("Ukuran file terlalu besar. Maksimal 2MB.");return}if(!t.type.startsWith("image/")){L(d=>({...d,[a]:!0}));const s=document.querySelector(`input[data-field="${a}"]`);s&&(s.value=""),i.error("Hanya file gambar (JPG, PNG, GIF, dll) yang diperbolehkan.");return}J(s=>({...s,[a]:t})),L(s=>({...s,[a]:!1})),i.success("File berhasil diunggah.")},V=a=>{const t=new Date,d=new Date(a).getTime()-t.getTime();if(d<=0)return{time:"Sudah kadaluarsa",status:"expired"};const h=Math.floor(d/(1e3*60*60)),o=Math.floor(d%(1e3*60*60)/(1e3*60));return h<1?{time:`${o} menit lagi`,status:"urgent"}:{time:`${h} jam ${o} menit lagi`,status:h<3?"urgent":"normal"}},Fe=a=>{navigator.clipboard.writeText(a).then(()=>{i.success("Berhasil menyalin ke clipboard!")})},Ee=a=>{if(!a)return null;switch(a){case"beginner":return e.jsx("span",{className:"rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"Beginner"});case"intermediate":return e.jsx("span",{className:"rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",children:"Intermediate"});case"advanced":return e.jsx("span",{className:"rounded-full bg-red-100 px-3 py-1 text-xs font-medium text-red-700 dark:bg-red-900/30 dark:text-red-300",children:"Advanced"});default:return null}};return m.useEffect(()=>{console.log("useEffect triggered",{isLoggedIn:f,bootcampId:r.id});const a=sessionStorage.getItem("pendingCheckout");if(console.log("pendingCheckout from sessionStorage:",a),a&&f)try{const t=JSON.parse(a);console.log("Parsed checkout data:",t);const s=t.timestamp||0,d=Date.now(),h=5*60*1e3;if(d-s>h){console.log("Checkout data expired"),sessionStorage.removeItem("pendingCheckout"),i.error("Sesi checkout telah kadaluarsa");return}if(t.bootcampId!==r.id){console.log("Bootcamp ID mismatch"),sessionStorage.removeItem("pendingCheckout");return}console.log("Processing pending checkout..."),t.promoCode&&ne(t.promoCode),t.discountData&&D(t.discountData),oe(t.termsAccepted||!1),i.success("Melanjutkan pembayaran..."),setTimeout(async()=>{console.log("Starting payment submission..."),p(!0);const o=async(x=0)=>{var v,O,ge;const Y=r.strikethrough_price>0?r.strikethrough_price-r.price:0,C=((v=t.discountData)==null?void 0:v.discount_amount)||0,B=r.price-C,P=B+5e3,j={type:"bootcamp",id:r.id,discount_amount:Y+C,nett_amount:B,total_amount:P};(O=t.discountData)!=null&&O.valid&&(j.discount_code_id=t.discountData.discount_code.id,j.discount_code_amount=t.discountData.discount_amount),console.log("Invoice data:",j);try{const I=(ge=document.querySelector('meta[name="csrf-token"]'))==null?void 0:ge.content;console.log("CSRF token:",I);const A=await fetch(route("invoice.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":I||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(j)});if(console.log("Response status:",A.status),A.status===419&&x<2)return console.log(`CSRF token expired, refreshing... (attempt ${x+1})`),await ue(),o(x+1);if(A.status===401&&x<2)return console.log("Unauthorized, retrying..."),await new Promise(De=>setTimeout(De,2e3)),o(x+1);const M=await A.json();if(console.log("Response data:",M),A.ok&&M.success)if(M.payment_url)console.log("Redirecting to payment..."),sessionStorage.removeItem("pendingCheckout"),window.location.href=M.payment_url;else throw new Error("Payment URL not received");else throw new Error(M.message||"Gagal membuat invoice.")}catch(I){throw console.error("Payment error:",I),I}};try{await o()}catch(x){console.error("Failed to process payment:",x),i.error(x.message||"Terjadi kesalahan saat proses pembayaran."),sessionStorage.removeItem("pendingCheckout"),p(!1)}},2e3)}catch(t){console.error("Error processing pending checkout:",t),sessionStorage.removeItem("pendingCheckout"),i.error("Gagal memproses checkout")}else console.log("Conditions not met:",{hasPendingCheckout:!!a,isLoggedIn:f})},[f,r.id]),f&&!re?e.jsxs("div",{className:"min-h-screen bg-[url('/assets/images/bg-product.png')] bg-cover bg-center bg-no-repeat",children:[e.jsx(he,{title:"Daftar Bootcamp"}),e.jsx("section",{className:"flex min-h-screen items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-6 rounded-2xl border bg-white/95 p-8 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"rounded-full bg-orange-100 p-6 dark:bg-orange-900/30",children:e.jsx(Me,{size:48,className:"text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mb-2 text-2xl font-bold",children:"Profil Belum Lengkap"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Harap lengkapi nomor telepon terlebih dahulu untuk melanjutkan pendaftaran"})]}),e.jsx(y,{asChild:!0,className:"w-full",size:"lg",children:e.jsx(Z,{href:route("profile.edit",{redirect:window.location.href}),children:"Lengkapi Profil"})})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-[url('/assets/images/bg-product.png')] bg-cover bg-center bg-no-repeat",children:[e.jsx(he,{title:"Daftar Bootcamp"}),e.jsxs("section",{className:"mx-auto w-full max-w-7xl px-4 py-12",children:[e.jsxs("div",{className:"mb-8 px-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Z,{href:"/bootcamp",className:"hover:text-orange-600",children:"Bootcamp"}),e.jsx("span",{children:"/"}),e.jsx(Z,{href:`/bootcamp/${r.slug}`,className:"hover:text-orange-600",children:r.title}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:"Daftar"})]}),e.jsx("h1",{className:"mt-8 text-3xl font-bold text-gray-900 md:text-4xl dark:text-white",children:"Daftar Bootcamp"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:c?"lg:col-span-3":"lg:col-span-2",children:e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"border-b bg-gray-50/80 p-4 dark:bg-gray-900/80",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[e.jsx(qe,{className:"h-5 w-5"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Detail Pesanan"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-24 w-32 flex-shrink-0 overflow-hidden rounded-lg",children:e.jsx("img",{src:r.thumbnail?`/storage/${r.thumbnail}`:"/assets/images/placeholder.png",alt:r.title,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"mb-2 inline-block rounded-full bg-purple-100 px-3 py-1 text-xs font-medium text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",children:"Bootcamp"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900 dark:text-white",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[Ee(r.level),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ze,{size:16}),e.jsxs("span",{children:[new Date(r.start_date).toLocaleDateString("id-ID",{day:"numeric",month:"short"})," ","-"," ",new Date(r.end_date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]})]})]})]})]})}),!f&&e.jsxs("form",{className:"flex flex-col gap-6 p-6 pt-0",onSubmit:Se,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(S,{id:"email",type:"email",required:!0,tabIndex:1,autoComplete:"email",value:l.email,onChange:a=>_("email",a.target.value),disabled:X,placeholder:"email@example.com",className:"pr-10"}),K&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:e.jsx(fe,{className:"h-4 w-4 animate-spin text-gray-400"})}),!K&&b&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:e.jsx(te,{className:"h-5 w-5 text-green-600"})})]}),e.jsx(y,{type:"button",variant:"outline",size:"icon",onClick:async()=>{if(!l.email||!l.email.includes("@")){i.error("Masukkan email yang valid");return}G(!0);try{const a=await q.post("/api/check-email",{email:l.email});a.data.exists?(N(!0),_("name",a.data.name||""),_("phone_number",a.data.phone_number||""),i.success("Email ditemukan!")):(N(!1),i.info("Email tidak terdaftar"))}catch(a){console.error("Error checking email:",a),N(!1),i.error("Gagal mengecek email")}finally{G(!1)}},disabled:K||!l.email,className:"flex-shrink-0",children:e.jsx(ke,{className:"h-4 w-4"})})]}),b&&e.jsx("p",{className:"text-xs text-green-600",children:"Email ditemukan, data terisi otomatis"}),e.jsx(ee,{message:W.email})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"name",children:"Nama"}),e.jsx(S,{id:"name",type:"text",required:!0,tabIndex:2,autoComplete:"name",value:l.name,onChange:a=>_("name",a.target.value),disabled:X||b,placeholder:"Nama lengkap Anda"}),e.jsx(ee,{message:W.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"phone_number",children:"No. Telepon"}),e.jsx(S,{id:"phone_number",type:"tel",required:!0,tabIndex:3,autoComplete:"tel",value:l.phone_number,onChange:a=>_("phone_number",a.target.value),disabled:X||b,placeholder:"08xxxxxxxxxx"}),!b&&e.jsx("p",{className:"text-xs text-gray-500",children:"Nomor telepon akan digunakan sebagai password anda"}),b&&e.jsx("p",{className:"text-xs text-blue-600",children:"Pastikan nomor telepon sesuai dengan yang terdaftar"}),e.jsx(ee,{message:W.phone_number})]})]})]})]})}),e.jsx("div",{className:c?"lg:col-span-3":"lg:col-span-1",children:be?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-2xl border bg-white/95 p-6 text-center shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"rounded-full bg-green-100 p-4 dark:bg-green-900/30",children:e.jsx(Ge,{size:48,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-2 text-xl font-bold",children:"Sudah Memiliki Akses"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Anda sudah terdaftar di bootcamp ini. Silakan masuk ke grup."})]}),e.jsx(y,{asChild:!0,className:"w-full",size:"lg",children:e.jsx("a",{href:r.group_url??"",target:"_blank",rel:"noopener noreferrer",children:"Masuk Grup Bootcamp"})})]}):c?e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"border-b p-4 dark:bg-yellow-900/20",style:{backgroundColor:V(c.expires_at).status==="expired"&&c.status==="pending"?"#fee2e2":"rgba(254, 249, 195, 0.5)"},children:e.jsx("div",{className:"flex items-center gap-2",children:V(c.expires_at).status==="expired"&&c.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-5 w-5 text-red-600"}),e.jsx("h2",{className:"text-lg font-semibold text-red-700 dark:text-red-300",children:"Pembayaran Gagal"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h2",{className:"text-lg font-semibold text-yellow-900 dark:text-yellow-200",children:"Pembayaran Tertunda"})]})})}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"space-y-3 rounded-lg bg-gray-50 p-4 dark:bg-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No. Invoice"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:c.invoice_code})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Pembayaran"}),e.jsxs("span",{className:"text-xl font-bold text-orange-600",children:["Rp ",c.amount.toLocaleString("id-ID")]})]})]}),V(c.expires_at).status==="expired"&&c.status==="pending"?e.jsx("div",{className:"rounded-lg bg-red-50 p-4 dark:bg-red-900/20",children:e.jsxs("p",{className:"text-sm font-semibold text-red-700 dark:text-red-300",children:["Waktu pembayaran telah habis. Jika Anda sudah membayar atau butuh bantuan, silakan hubungi admin melaluiÂ ",e.jsx("a",{href:"https://wa.me/6289528514480",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-orange-600 underline",children:"WhatsApp Admin"}),"."]})}):e.jsxs(e.Fragment,{children:[c.va_number&&e.jsxs("div",{className:"space-y-3 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Nomor Virtual Account"}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-white p-3 dark:bg-gray-700",children:[e.jsx("span",{className:"font-mono text-lg font-bold text-gray-900 dark:text-white",children:c.va_number}),e.jsx("button",{onClick:()=>Fe(c.va_number),className:"rounded-lg bg-blue-600 px-3 py-2 text-xs font-medium text-white transition-colors hover:cursor-pointer hover:bg-blue-700",children:"Salin"})]})]}),c.qr_code_url&&e.jsxs("div",{className:"space-y-3 rounded-lg bg-purple-50 p-4 dark:bg-purple-900/20",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Kode QR Pembayaran"}),e.jsx("div",{className:"flex justify-center rounded-lg bg-white p-4 dark:bg-gray-700",children:e.jsx("img",{src:c.qr_code_url,alt:"QR Code",className:"h-48 w-48 object-contain"})}),e.jsx("a",{href:c.qr_code_url,download:!0,className:"block rounded-lg bg-purple-600 px-4 py-2 text-center text-sm font-medium text-white transition-colors hover:bg-purple-700",children:"Download QR Code"})]}),T!=null&&T.instructions&&T.instructions.length>0?e.jsxs("div",{className:"space-y-4 rounded-lg bg-gray-50 p-4 dark:bg-gray-700/50",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Langkah Pembayaran"}),e.jsx("div",{className:"space-y-4",children:T.instructions.map((s,d)=>e.jsxs("details",{className:"group rounded-lg border border-gray-200 dark:border-gray-600",open:d===0,children:[e.jsxs("summary",{className:"flex cursor-pointer items-center justify-between bg-gray-100 px-4 py-3 hover:bg-gray-200 dark:bg-gray-600 dark:hover:bg-gray-500",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsx("span",{className:"text-gray-600 transition-transform group-open:rotate-180 dark:text-gray-300",children:"â–¼"})]}),e.jsx("div",{className:"space-y-3 bg-white px-4 py-4 dark:bg-gray-700",children:e.jsx("ol",{className:"space-y-2",children:s.steps.map((h,o)=>e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-orange-400 to-orange-600 text-xs font-bold text-white",children:o+1}),e.jsx("span",{className:"flex-1 pt-0.5 text-sm text-gray-700 dark:text-gray-300",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:h}})})]},o))})})]},d))})]}):null]}),e.jsx(y,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full",size:"lg",children:"Cek Status Pembayaran"})]})]}):ye?e.jsx("form",{onSubmit:Ce,children:e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"border-b bg-gray-50/80 p-4 dark:bg-gray-900/80",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Upload Bukti Follow & Tag"})}),e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"ig_follow_proof",children:"Bukti Follow Instagram"}),e.jsx(S,{id:"ig_follow_proof","data-field":"ig_follow_proof",type:"file",accept:"image/*",onChange:a=>{var t;return Q("ig_follow_proof",((t=a.target.files)==null?void 0:t[0])||null)},className:z.ig_follow_proof?"border-red-500":"",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Screenshot profil Instagram @brevetpajak_talenta yang menunjukkan follow (Maks. 2MB)"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"tiktok_follow_proof",children:"Bukti Follow TikTok"}),e.jsx(S,{id:"tiktok_follow_proof","data-field":"tiktok_follow_proof",type:"file",accept:"image/*",onChange:a=>{var t;return Q("tiktok_follow_proof",((t=a.target.files)==null?void 0:t[0])||null)},className:z.tiktok_follow_proof?"border-red-500":"",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Screenshot profil TikTok @brevetpajak_talenta yang menunjukkan follow (Maks. 2MB)"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"tag_friend_proof",children:"Bukti Tag 3 Teman"}),e.jsx(S,{id:"tag_friend_proof","data-field":"tag_friend_proof",type:"file",accept:"image/*",onChange:a=>{var t;return Q("tag_friend_proof",((t=a.target.files)==null?void 0:t[0])||null)},className:z.tag_friend_proof?"border-red-500":"",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Screenshot komentar yang menunjukkan tag 3 teman (Maks. 2MB)"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>{ie(!1),L({ig_follow_proof:!1,tiktok_follow_proof:!1,tag_friend_proof:!1}),J({ig_follow_proof:null,tiktok_follow_proof:null,tag_friend_proof:null})},className:"flex-1",children:"Kembali"}),e.jsx(y,{type:"submit",disabled:E||!k.ig_follow_proof||!k.tiktok_follow_proof||!k.tag_friend_proof||Object.values(z).some(a=>a),className:"flex-1",children:E?"Memproses...":"Dapatkan Akses Gratis"})]})]})]})}):e.jsx("form",{onSubmit:Pe,children:e.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-white/95 shadow-xl backdrop-blur-sm dark:bg-gray-800/95",children:[e.jsx("div",{className:"border-b bg-gray-50/80 p-4 dark:bg-gray-900/80",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:u?"Detail Pendaftaran":"Ringkasan Pembayaran"})}),e.jsxs("div",{className:"space-y-4 p-6",children:[u?e.jsxs("div",{className:"rounded-lg bg-green-50 p-6 text-center dark:bg-green-900/20",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"BOOTCAMP GRATIS"}),e.jsx("p",{className:"mt-2 text-sm text-green-700 dark:text-green-300",children:"Dapatkan akses dengan mengikuti persyaratan berikut"}),e.jsxs("ul",{className:"mt-4 space-y-1 text-left text-sm text-green-700 dark:text-green-300",children:[e.jsxs("li",{children:["â€¢ Follow Instagram",e.jsx("a",{href:"https://www.instagram.com/brevetpajak_talenta/",target:"_blank",rel:"noopener noreferrer",className:"font-medium underline",children:"@brevetpajak_talenta"})]}),e.jsxs("li",{children:["â€¢ Follow TikTok",e.jsx("a",{href:"https://www.tiktok.com/@brevetpajak_talenta",target:"_blank",rel:"noopener noreferrer",className:"font-medium underline",children:"@brevetpajak_talenta"})]}),e.jsx("li",{children:"â€¢ Tag 3 teman di postingan Instagram kami"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"promo-code",className:"text-sm font-medium",children:"Punya Kode Promo?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(S,{id:"promo-code",type:"text",placeholder:"Masukkan kode promo",value:g,onChange:a=>ne(a.target.value.toUpperCase()),className:"pr-10"}),H&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:e.jsx(fe,{className:"h-4 w-4 animate-spin text-gray-400"})}),!H&&g&&e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:n!=null&&n.valid?e.jsx(te,{className:"h-5 w-5 text-green-600"}):$?e.jsx(je,{className:"h-5 w-5 text-red-600"}):null})]}),e.jsx(y,{type:"button",variant:"outline",size:"icon",onClick:async()=>{if(!g.trim()){i.error("Masukkan kode promo terlebih dahulu");return}await xe()},disabled:H||!g.trim(),className:"flex-shrink-0",children:e.jsx(ke,{className:"h-4 w-4"})})]}),$&&e.jsx("p",{className:"text-sm text-red-600",children:$}),(n==null?void 0:n.valid)&&e.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3 dark:border-green-800 dark:bg-green-900/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4 text-green-600"}),e.jsxs("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:['Promo "',n.discount_code.code,'" diterapkan!']})]}),e.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-300",children:n.discount_code.name})]})]}),e.jsx(ae,{}),e.jsxs("div",{className:"space-y-3",children:[r.strikethrough_price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Harga Asli"}),e.jsxs("span",{className:"font-medium text-gray-500 line-through dark:text-gray-400",children:["Rp ",r.strikethrough_price.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diskon"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-Rp ",(r.strikethrough_price-r.price).toLocaleString("id-ID")]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Harga Bootcamp"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["Rp ",r.price.toLocaleString("id-ID")]})]}),(n==null?void 0:n.valid)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Diskon Promo (",n.discount_code.code,")"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-Rp ",n.discount_amount.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Biaya Transaksi"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["Rp ",ce.toLocaleString("id-ID")]})]}),e.jsx(ae,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:"Total Pembayaran"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["Rp ",me.toLocaleString("id-ID")]})]})]})]}),!u&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ie,{id:"terms",checked:F,onCheckedChange:a=>oe(a===!0),className:"mt-1"}),e.jsxs(w,{htmlFor:"terms",className:"text-sm leading-relaxed text-gray-600 dark:text-gray-400",children:["Saya menyetujui "," ",e.jsx("a",{href:"/terms-and-conditions",target:"_blank",className:"font-medium text-orange-600 hover:underline",children:"syarat dan ketentuan"})," ","yang berlaku"]})]})]}),e.jsx(y,{className:"w-full",type:"submit",disabled:(u?!1:!F)||E,size:"lg",children:E?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Memproses..."]}):u?"Upload Bukti Follow":"Bayar Sekarang"}),e.jsx("p",{className:"text-center text-xs text-gray-500 dark:text-gray-400",children:"Pembayaran aman dan terenkripsi ðŸ”’"})]})]})})})]})]}),e.jsx(Ae,{position:"top-center",richColors:!0})]})}export{ja as default};
