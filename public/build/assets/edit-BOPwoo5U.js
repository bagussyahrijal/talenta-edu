import{r as n,j as e,L as M,S as P}from"./app-DbpzdwFL.js";import{B as L}from"./button-nsSqORs2.js";import{u as B,F as z,a as l,b as m,c as d,d as y,e as c,f as h}from"./form-B-HgXYV7.js";import{I as v}from"./input-GGR-33Of.js";import{S as I,a as K,b as U,c as _,d as D}from"./select-D4Rt7mhW.js";import{T as G}from"./textarea-1lTExOUA.js";import{A as J}from"./admin-layout-qkh5HjtB.js";import{s as V,o as q,a as W,b as u}from"./types-CQtFLSY3.js";import{E as $}from"./Editor-D0rOMjw-.js";import{t as N}from"./index-adnqAMSx.js";import{F as S}from"./file-text-CQepP0w_.js";import{C as H}from"./clock-JumJjszk.js";/* empty css            */import"./index-muyUwSbg.js";import"./index-BKZ60sTg.js";import"./utils-t30SwFLs.js";import"./label-CJg2QrTt.js";import"./index-BNGjsBO4.js";import"./index-BBYaHc3j.js";import"./index-BrWH3fgz.js";import"./index-Czgf-KsJ.js";import"./floating-ui.react-dom-GTqUnYaj.js";import"./index-DWIaYFCs.js";import"./index-BlfYzGKu.js";import"./index-BG9WF58p.js";import"./Combination-BfBk5v_5.js";import"./chevron-down-qOg5Thj1.js";import"./createLucideIcon-C4hA1fDf.js";import"./check-BUnQtbm6.js";import"./chevron-up-C65NXe2c.js";import"./sonner-BVDcOtMc.js";import"./breadcrumbs-BB8Ncwy_.js";import"./index-DLFvmWB3.js";import"./x-Ck5JSsba.js";import"./tooltip-BP3-rQs1.js";import"./index-DQnLm8Kj.js";import"./dropdown-menu-2YdbIEK2.js";import"./avatar-COyTLtDN.js";import"./use-initials-QSx-oft4.js";import"./user-CtC4W_DT.js";import"./chevron-right-B5kzfHcg.js";import"./app-sidebar-header-DlOmqqkD.js";import"./chevrons-up-down-DYhEesso.js";import"./user-check-lA5eDnOn.js";import"./users-ddkDeduW.js";import"./monitor-play-BpYKtXm7.js";import"./presentation-CbszFwHd.js";import"./gift-IIy9kaeP.js";import"./banknote-BtaNyBNx.js";import"./dollar-sign-CTBJ4doy.js";import"./index-DT1WykSM.js";const O=t=>[{title:"Artikel",href:route("articles.index")},{title:t.title,href:route("articles.show",t.id)},{title:"Edit Artikel",href:route("articles.edit",t.id)}],Q=q({title:u().min(1,"Judul harus diisi"),category_id:u().min(1,"Kategori harus dipilih"),excerpt:u().nullable().optional(),content:u().nullable().optional(),thumbnail:W().nullable()});function He({article:t,categories:C}){const[g,j]=n.useState(null),[E,x]=n.useState(!1),[F,T]=n.useState(0),[b,w]=n.useState(0),r=B({resolver:V(Q),defaultValues:{title:t.title??"",category_id:t.category_id??"",excerpt:t.excerpt??"",content:t.content??"",thumbnail:null}}),f=a=>{const i=a.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(o=>o.length>0).length,p=Math.max(1,Math.ceil(i/200));w(i),T(p)};n.useEffect(()=>{t.content&&f(t.content)},[t.content]);function A(a){const s={...a,_method:"PUT"};P.post(route("articles.update",t.id),s,{forceFormData:!0})}return e.jsxs(J,{breadcrumbs:O(t),children:[e.jsx(M,{title:`Edit Artikel - ${t.title}`}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:["Edit ",t.title]}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:"Edit informasi artikel. Perubahan akan meng-update slug dan URL jika judul berubah."}),e.jsx(z,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(A),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16}),e.jsx("h3",{className:"font-medium",children:"Informasi Artikel"})]}),e.jsx(l,{control:r.control,name:"title",render:({field:a})=>e.jsxs(m,{children:[e.jsxs(d,{children:["Judul Artikel ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(y,{children:e.jsx(v,{placeholder:"Masukkan judul artikel",...a,autoComplete:"off"})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"category_id",render:({field:a})=>e.jsxs(m,{children:[e.jsxs(d,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(I,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(y,{children:e.jsx(K,{children:e.jsx(U,{placeholder:"Pilih kategori"})})}),e.jsx(_,{children:C.map(s=>e.jsx(D,{value:s.id,children:s.name},s.id))})]}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"excerpt",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Ringkasan Singkat"}),e.jsx(G,{...a,value:a.value??"",placeholder:"Ringkasan singkat artikel (maks 500 karakter)",maxLength:500,rows:3,autoComplete:"off"}),e.jsx(h,{children:"Ringkasan yang akan ditampilkan di list artikel"}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"thumbnail",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Thumbnail"}),e.jsx("img",{src:g||(t.thumbnail?`/storage/${t.thumbnail}`:"/assets/images/placeholder.png"),alt:t.title,className:"my-1 mt-2 h-52 rounded border object-cover"}),e.jsx(v,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg, image/webp",className:E?"border-red-500 focus-visible:ring-red-500":"",onChange:s=>{var p;const i=((p=s.target.files)==null?void 0:p[0])??null;if(i){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(i.type)){x(!0),N.error("Gambar harus png, jpg, jpeg, atau webp");return}if(i.size>2*1024*1024){x(!0),N.error("Ukuran file maksimal 2MB!");return}}if(x(!1),a.onChange(i),i){const o=new FileReader;o.onload=R=>{var k;return j((k=R.target)==null?void 0:k.result)},o.readAsDataURL(i)}else j(null)}}),e.jsx(h,{children:"Format: PNG, JPG, JPEG, WEBP. Maksimal 2MB"}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16}),e.jsx("h3",{className:"font-medium",children:"Konten Artikel"})]}),e.jsx(l,{control:r.control,name:"content",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Konten"}),e.jsx($,{apiKey:"7apjqdre3ocnt08y5t5zlqyaytlom537pj6qbe0hlxhborco",value:a.value??"",onEditorChange:s=>{a.onChange(s),f(s)},init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount","code"],toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table codesample | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat | code",height:500,menubar:!1,content_style:'body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; font-size: 14px; }'}}),e.jsx(h,{children:"Tulis konten artikel dengan lengkap dan menarik"}),e.jsx(c,{})]})}),b>0&&e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Estimasi Waktu Baca"})]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[F," menit"]})]}),e.jsxs("p",{className:"mt-2 text-xs text-blue-700",children:[b.toLocaleString()," kata â€¢ Kecepatan baca rata-rata: 200 kata/menit"]})]}),e.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-4",children:[e.jsx("h4",{className:"mb-2 font-medium text-gray-900",children:"Status Artikel"}),e.jsx("div",{className:"space-y-2 text-sm text-gray-700",children:e.jsx("div",{className:"text-muted-foreground text-xs",children:"Ubah status artikel di halaman detail setelah menyimpan perubahan."})})]})]}),e.jsx(L,{type:"submit",className:"hover:cursor-pointer lg:col-span-2",disabled:r.formState.isSubmitting,children:r.formState.isSubmitting?"Menyimpan...":"Simpan Perubahan"})]})})]})]})}export{He as default};
