import{r as y,j as e,L as re,S as te}from"./app-CoKrZrj3.js";import{B as b}from"./button-CENPH9h-.js";import{C as ie,b as oe}from"./calendar-BDva1c53.js";import{C as M,a as F,b as I,c as O,d as V,e as A}from"./command-CKu62u14.js";import{u as ne,F as le,a as o,b as n,c as l,d as c,f as v,e as d}from"./form-CRszTXvY.js";import{I as j}from"./input-DdnhdXmC.js";import{P as N,a as C,b as k}from"./popover-hRLHWdNr.js";import{S as ce,a as de,b as me,c as ue,d as B}from"./select-CgaCsVZs.js";import{T as pe}from"./textarea-CoXlYFiF.js";import{A as he}from"./admin-layout-CVV3Zxk2.js";import{c as h}from"./utils-BK-3Ko0Z.js";import{s as xe,o as je,b as i,e as be}from"./types-DGZWg7B-.js";import{A as $}from"./award-Btuz15mj.js";import{C as fe}from"./calendar-fold-Cz8jy8fJ.js";import{C as D}from"./chevrons-up-down-Cgf5nTKj.js";import{C as J}from"./check-B6-AaX-Q.js";import{C as ge}from"./chevron-down-CU6nNNKO.js";import{f}from"./format-CNjBDjOL.js";import{i as z}from"./id-BLKIQCr7.js";import"./index-DKXa17Pu.js";import"./index-i5lukUhi.js";import"./chevron-left-Bv8g2-L8.js";import"./createLucideIcon-DNGYmDqV.js";import"./chevron-right-DL8rdZ6F.js";import"./index-RDzITIWU.js";import"./index-ChfhAgVN.js";import"./Combination-cXPy01tN.js";import"./index-CgvVPaUW.js";import"./index-DLZNXr4s.js";import"./index-wK9xT5vh.js";import"./index-DUr0H7tg.js";import"./floating-ui.react-dom-DZ8cfFMA.js";import"./dialog-CNV0HB_F.js";import"./x-C1Xvrbjr.js";import"./search-CnIM5z2p.js";import"./label-ymCkihFa.js";import"./index-Jny6McFr.js";import"./index-B6G03q1y.js";import"./index-Bn2EXX31.js";import"./chevron-up-DZluTWx6.js";import"./sonner-C_S5-8cW.js";import"./index-DF0tB-kM.js";import"./breadcrumbs-_3SC32mF.js";import"./tooltip-Ccg6hF8l.js";import"./index-DdpPGqe0.js";import"./dropdown-menu-7tYwFHJv.js";import"./avatar-D15yh6LI.js";import"./use-initials-Cf6-0CWp.js";import"./user-CzzwG94C.js";import"./app-sidebar-header-Z1y1A4rZ.js";import"./user-check-CoRh7QsK.js";import"./users-CH7NAGOZ.js";import"./presentation-BaHKbaAb.js";import"./gift-BFM02Ea6.js";import"./banknote-B6-z3uyC.js";import"./dollar-sign-CXW-f0Mg.js";import"./file-text-yPRwgQua.js";const ye=[{title:"Sertifikat",href:route("certificates.index")},{title:"Tambah Sertifikat Baru",href:route("certificates.create")}],ve=je({design_id:i().nonempty("Desain sertifikat harus dipilih"),sign_id:i().nonempty("Tanda tangan harus dipilih"),certificate_number:i().nonempty("Nomor sertifikat harus diisi"),title:i().nonempty("Judul sertifikat harus diisi"),description:i().nullable(),header_top:i().nullable(),header_bottom:i().nullable(),issued_date:i().nullable(),period:i().nullable(),program_type:be(["course","bootcamp","webinar"]).refine(p=>p!==void 0,{message:"Jenis program harus dipilih"}),course_id:i().nullable(),bootcamp_id:i().nullable(),webinar_id:i().nullable()}),Ne=()=>f(new Date,"yyyy-MM-dd"),Ce=()=>{const p=new Date,g=oe(p,5),P=f(p,"MMMM yyyy",{locale:z}),_=f(g,"MMMM yyyy",{locale:z});return`${P} - ${_}`};function wa({designs:p,signs:g,courses:P,bootcamps:_,webinars:R,prefilledData:m={}}){const[U,L]=y.useState(!1),[Y,H]=y.useState(!1),[G,K]=y.useState(!1),[q,E]=y.useState(!1),r=ne({resolver:xe(ve),defaultValues:{design_id:"",sign_id:"",certificate_number:"",title:m.title||"",description:m.description||"",header_top:"No: AHU-0001401-AH.01.14 Tahun 2025",header_bottom:"Alamat Permata Permadani Residence, Junrejo, Kota Batu, Jawa Timur",issued_date:Ne(),period:Ce(),program_type:m.program_type,course_id:m.course_id||"",bootcamp_id:m.bootcamp_id||"",webinar_id:m.webinar_id||""}}),u=r.watch("program_type"),Q=!!m.course_id,X=!!m.bootcamp_id,Z=!!m.webinar_id,x=Q||X||Z;function ee(a){te.post(route("certificates.store"),a)}const w=()=>{switch(u){case"course":return P;case"bootcamp":return _;case"webinar":return R;default:return[]}},S=()=>{switch(u){case"course":return"course_id";case"bootcamp":return"bootcamp_id";case"webinar":return"webinar_id";default:return""}},ae=()=>{switch(u){case"course":return"Pilih kelas online";case"bootcamp":return"Pilih bootcamp";case"webinar":return"Pilih webinar";default:return"Pilih program"}},W=()=>{const a=S(),t=r.watch(a),T=w().find(se=>se.id===t);return(T==null?void 0:T.title)||""};return e.jsxs(he,{breadcrumbs:ye,children:[e.jsx(re,{title:"Tambah Sertifikat Baru"}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tambah Sertifikat Baru"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:"Silakan isi form di bawah ini untuk membuat sertifikat baru. Pastikan semua informasi yang diperlukan telah diisi dengan benar."}),x&&e.jsxs("div",{className:"mb-6 rounded-lg bg-blue-50 p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Program Terpilih"})]}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Sertifikat ini akan dibuat untuk program: ",e.jsx("strong",{children:W()})]})]}),e.jsx(le,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(ee),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{size:16}),e.jsx("h3",{className:"font-medium",children:"Informasi Sertifikat"})]}),e.jsx(o,{control:r.control,name:"certificate_number",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(l,{children:["Nomor Sertifikat ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsx(j,{placeholder:"Contoh: LA12-AKS/VII/2025",...a,autoComplete:"off"})}),e.jsx(v,{children:"Nomor unik untuk sertifikat ini"}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"title",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(l,{children:["Judul Sertifikat ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsx(j,{placeholder:"Masukkan judul sertifikat",...a,autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"description",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Deskripsi"}),e.jsx(pe,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi sertifikat",autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"header_top",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Header Atas"}),e.jsx(c,{children:e.jsx(j,{placeholder:"Teks untuk header bagian atas",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"header_bottom",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Header Bawah"}),e.jsx(c,{children:e.jsx(j,{placeholder:"Teks untuk header bagian bawah",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Tambahan"})]}),e.jsx(o,{control:r.control,name:"program_type",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(l,{children:["Jenis Program ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ce,{onValueChange:t=>{a.onChange(t),x||(r.setValue("course_id",""),r.setValue("bootcamp_id",""),r.setValue("webinar_id",""))},defaultValue:a.value,disabled:x,children:[e.jsx(c,{children:e.jsx(de,{children:e.jsx(me,{placeholder:"Pilih jenis program"})})}),e.jsxs(ue,{children:[e.jsx(B,{value:"course",children:"Kelas Online"}),e.jsx(B,{value:"bootcamp",children:"Bootcamp"}),e.jsx(B,{value:"webinar",children:"Webinar"})]})]}),x&&e.jsx(v,{className:"text-blue-600",children:"Program sudah dipilih dari halaman detail program"}),e.jsx(d,{})]})}),u&&e.jsx(o,{control:r.control,name:S(),render:({field:a})=>{var t;return e.jsxs(n,{className:"flex flex-col",children:[e.jsxs(l,{children:[u==="course"?"Kelas Online":u==="bootcamp"?"Bootcamp":"Webinar"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),x?e.jsx(c,{children:e.jsx(j,{value:W(),disabled:!0,className:"bg-gray-50"})}):e.jsxs(N,{open:G,onOpenChange:K,children:[e.jsx(C,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",role:"combobox",className:h("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(t=w().find(s=>s.id===a.value))==null?void 0:t.title:ae(),e.jsx("span",{className:"sr-only",children:"Pilih program"}),e.jsx(D,{className:"opacity-50"})]})})}),e.jsx(k,{className:"p-0",children:e.jsxs(M,{children:[e.jsx(F,{placeholder:`Cari ${u}...`,className:"h-9"}),e.jsxs(I,{children:[e.jsxs(O,{children:["Tidak ada ",u," ditemukan."]}),e.jsx(V,{children:w().map(s=>e.jsxs(A,{value:s.title,onSelect:()=>{r.setValue(S(),s.id),K(!1)},children:[s.title,e.jsx(J,{className:h("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),x&&e.jsx(v,{className:"text-blue-600",children:"Program sudah dipilih dari halaman detail"}),e.jsx(d,{})]})}}),e.jsx(o,{control:r.control,name:"design_id",render:({field:a})=>{var t;return e.jsxs(n,{className:"flex flex-col",children:[e.jsxs(l,{children:["Desain Sertifikat ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(N,{open:U,onOpenChange:L,children:[e.jsx(C,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",role:"combobox",className:h("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(t=p.find(s=>s.id===a.value))==null?void 0:t.name:"Pilih desain sertifikat",e.jsx("span",{className:"sr-only",children:"Pilih desain"}),e.jsx(D,{className:"opacity-50"})]})})}),e.jsx(k,{className:"p-0",children:e.jsxs(M,{children:[e.jsx(F,{placeholder:"Cari desain...",className:"h-9"}),e.jsxs(I,{children:[e.jsx(O,{children:"Tidak ada desain ditemukan."}),e.jsx(V,{children:p.map(s=>e.jsxs(A,{value:s.name,onSelect:()=>{r.setValue("design_id",s.id),L(!1)},children:[s.name,e.jsx(J,{className:h("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(d,{})]})}}),e.jsx(o,{control:r.control,name:"sign_id",render:({field:a})=>{var t;return e.jsxs(n,{className:"flex flex-col",children:[e.jsxs(l,{children:["Tanda Tangan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(N,{open:Y,onOpenChange:H,children:[e.jsx(C,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",role:"combobox",className:h("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(t=g.find(s=>s.id===a.value))==null?void 0:t.name:"Pilih tanda tangan",e.jsx("span",{className:"sr-only",children:"Pilih tanda tangan"}),e.jsx(D,{className:"opacity-50"})]})})}),e.jsx(k,{className:"p-0",children:e.jsxs(M,{children:[e.jsx(F,{placeholder:"Cari tanda tangan...",className:"h-9"}),e.jsxs(I,{children:[e.jsx(O,{children:"Tidak ada tanda tangan ditemukan."}),e.jsx(V,{children:g.map(s=>e.jsxs(A,{value:s.name,onSelect:()=>{r.setValue("sign_id",s.id),H(!1)},children:[s.name,e.jsx(J,{className:h("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(d,{})]})}}),e.jsx(o,{control:r.control,name:"issued_date",render:({field:a})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(l,{children:"Tanggal Terbit"}),e.jsxs(N,{open:q,onOpenChange:E,children:[e.jsx(C,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",className:h("justify-between font-normal",!a.value&&"text-muted-foreground"),children:[a.value?f(new Date(a.value),"dd MMMM yyyy"):"Pilih tanggal terbit",e.jsx(ge,{className:"h-4 w-4 opacity-50"})]})})}),e.jsx(k,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(ie,{mode:"single",selected:a.value?new Date(a.value):void 0,endMonth:new Date(new Date().getFullYear()+10,11),onSelect:t=>{t?a.onChange(f(t,"yyyy-MM-dd")):a.onChange(""),E(!1)},captionLayout:"dropdown"})})]}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"period",render:({field:a})=>e.jsxs(n,{children:[e.jsx(l,{children:"Periode"}),e.jsx(c,{children:e.jsx(j,{placeholder:"Contoh: Januari - Maret 2025",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(v,{children:"Periode berlakunya sertifikat"}),e.jsx(d,{})]})})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(b,{type:"submit",className:"hover:cursor-pointer",children:"Simpan Sertifikat"})})]})})]})]})}export{wa as default};
