import{r as t,m as f,j as e}from"./app-DDrbOcx7.js";import{I as j}from"./input-error-kmcCtdTe.js";import{B as d}from"./button-n6t9aljh.js";import{D as w,a as b,b as v,g as k,c as D,d as _,e as y}from"./dialog-CISI9EwT.js";import{I as L}from"./input-Cyw6XLMS.js";import{L as u}from"./label-D-uUvZd6.js";import{P as E}from"./plus-DeQYL3Ck.js";import"./utils-iBm1Tl-X.js";import"./index-C8yCsOo4.js";import"./index-CoQoLWu2.js";import"./index-Db4ZopbB.js";import"./index-CcfFFHDG.js";import"./Combination-CnK2SSZv.js";import"./x-CwuwPgbl.js";import"./createLucideIcon-C_qgjRbq.js";function I(o){const i=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,a=o.match(i);return a&&a[2].length===11?a[2]:""}function W({webinarId:o,currentRecordingUrl:i}){const[a,l]=t.useState(!1),{data:s,setData:m,patch:p,processing:g,errors:x}=f({recording_url:i||""}),[n,c]=t.useState("");t.useEffect(()=>{if(s.recording_url){const r=I(s.recording_url);c(r?`https://www.youtube.com/embed/${r}`:"")}else c("")},[s.recording_url]);const h=r=>{r.preventDefault(),p(route("webinars.add-recording",{webinar:o}),{onSuccess:()=>{l(!1)}})};return e.jsxs(w,{open:a,onOpenChange:l,children:[e.jsx(b,{asChild:!0,children:e.jsxs(d,{className:"w-full",children:[e.jsx(E,{}),i?"Edit Link Rekaman":"Upload Link Rekaman"]})}),e.jsxs(v,{className:"sm:max-w-[425px]",children:[e.jsxs(k,{children:[e.jsx(D,{children:"Link Rekaman Webinar"}),e.jsx(_,{children:"Masukkan link video dari YouTube. Pastikan link valid agar peserta dapat melihat rekaman."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"recording_url",children:"Link YouTube"}),e.jsx(L,{id:"recording_url",value:s.recording_url,onChange:r=>m("recording_url",r.target.value),placeholder:"https://www.youtube.com/watch?v=xxxxxx",autoComplete:"off"}),e.jsx(j,{message:x.recording_url})]}),n&&e.jsxs("div",{children:[e.jsx(u,{children:"Pratinjau Video"}),e.jsx("div",{className:"mt-2 aspect-video w-full",children:e.jsx("iframe",{className:"h-full w-full rounded-lg border",src:n,title:"YouTube Preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),e.jsx(y,{children:e.jsx(d,{type:"submit",disabled:g,children:"Simpan Link"})})]})]})]})}export{W as default};
