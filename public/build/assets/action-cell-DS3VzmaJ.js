import{r as l,j as e,S as x}from"./app-DbpzdwFL.js";import{A as y,a as b,b as A,c as N,d as C,e as D,f as T,g as _,h as S}from"./alert-dialog-CdPscUwQ.js";import{B as n}from"./button-nsSqORs2.js";import{T as d,a as c,b as h}from"./tooltip-BP3-rQs1.js";import{t as s}from"./index-adnqAMSx.js";import w from"./edit-BuOwglWC.js";import{c as f}from"./createLucideIcon-C4hA1fDf.js";import{S as M}from"./square-pen-9Tu4nYP-.js";import{T as E}from"./trash-2-DhRhmcIc.js";/* empty css            */import"./index-DLFvmWB3.js";import"./index-BNGjsBO4.js";import"./index-muyUwSbg.js";import"./Combination-BfBk5v_5.js";import"./utils-t30SwFLs.js";import"./index-BKZ60sTg.js";import"./index-BBYaHc3j.js";import"./index-BrWH3fgz.js";import"./index-Czgf-KsJ.js";import"./floating-ui.react-dom-GTqUnYaj.js";import"./index-DQnLm8Kj.js";import"./index-BG9WF58p.js";import"./dialog-CupH4Hmp.js";import"./x-Ck5JSsba.js";import"./input-GGR-33Of.js";import"./label-CJg2QrTt.js";import"./switch-BLa2jwKQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],P=f("PowerOff",F);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],L=f("Power",H);function ce({promotion:a,promotions:m}){const[j,p]=l.useState(!1),[g,t]=l.useState(!1),[u,i]=l.useState(!1),o=m.some(r=>r.is_active&&r.id!==a.id),k=()=>{t(!0),x.delete(route("promotions.destroy",a.id),{onSuccess:()=>{s.success("Flyer promosi berhasil dihapus"),t(!1)},onError:()=>{s.error("Gagal menghapus flyer promosi"),t(!1)}})},v=()=>{if(!a.is_active&&o){s.error("Hanya boleh ada satu flyer promosi yang aktif. Nonaktifkan flyer yang aktif terlebih dahulu.");return}i(!0),x.patch(route("promotions.toggle-status",a.id),{},{onSuccess:()=>{const r=a.is_active?"dinonaktifkan":"diaktifkan";s.success(`Flyer promosi berhasil ${r}`),i(!1)},onError:()=>{s.error("Gagal mengubah status flyer promosi"),i(!1)}})};return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(d,{children:[e.jsx(c,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",onClick:v,disabled:u||!a.is_active&&o,className:`h-8 px-2 ${a.is_active?"text-red-600 hover:bg-red-50 hover:text-red-700":"text-green-600 hover:bg-green-50 hover:text-green-700"}`,children:u?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):a.is_active?e.jsx(P,{className:"h-4 w-4"}):e.jsx(L,{className:"h-4 w-4"})})}),e.jsx(h,{children:!a.is_active&&o?"Sudah ada flyer aktif":a.is_active?"Nonaktifkan Flyer":"Aktifkan Flyer"})]}),e.jsxs(d,{children:[e.jsx(c,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>p(!0),className:"h-8 px-2",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsx(h,{children:"Edit Flyer"})]}),e.jsxs(y,{children:[e.jsxs(d,{children:[e.jsx(c,{asChild:!0,children:e.jsx(b,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",className:"h-8 px-2 text-red-600 hover:bg-red-50 hover:text-red-700",children:e.jsx(E,{className:"h-4 w-4"})})})}),e.jsx(h,{children:"Hapus Flyer"})]}),e.jsxs(A,{children:[e.jsxs(N,{children:[e.jsx(C,{children:"Konfirmasi Hapus"}),e.jsx(D,{children:"Apakah Anda yakin ingin menghapus flyer promosi ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(T,{children:[e.jsx(_,{children:"Batal"}),e.jsx(S,{onClick:k,disabled:g,className:"bg-red-600 hover:bg-red-700",children:g?"Menghapus...":"Hapus"})]})]})]}),e.jsx(w,{promotion:a,open:j,onOpenChange:p,promotions:m})]})}export{ce as default};
