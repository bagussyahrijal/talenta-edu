import{r as A,j as e,L as M,S as o}from"./app-CoKrZrj3.js";import{D as E}from"./delete-dialog-DF0FicNV.js";import{B as m}from"./badge-CVPstJrV.js";import{B as c}from"./button-CENPH9h-.js";import{D as L,a as U,b as W}from"./dialog-CNV0HB_F.js";import{S as z}from"./separator-Dx2RsS8J.js";import{T as u,a as g,b as j}from"./tooltip-Ccg6hF8l.js";import{A as K}from"./admin-layout-CVV3Zxk2.js";import $ from"./edit-DJrUWco1.js";import{S as F}from"./square-pen-CUo-z6i0.js";import{T as H}from"./trash-B8KoZcS3.js";import{U as O}from"./user-CzzwG94C.js";import{M as R,P as q}from"./phone-BMtGzdwV.js";import{C as G}from"./calendar-DgvgliOC.js";import{D as Y}from"./dollar-sign-CXW-f0Mg.js";import{C as w}from"./credit-card-BnulbRh_.js";import{B as C,P as D,M as _}from"./presentation-BaHKbaAb.js";import{C as Z}from"./circle-check-big-C2h8f9rT.js";import{C as J}from"./clock-SUkaNFRf.js";import{U as Q}from"./users-CH7NAGOZ.js";import{C as V}from"./circle-play-eyvMr8nd.js";import{C as X}from"./chevron-left-Bv8g2-L8.js";import{C as ee}from"./chevron-right-DL8rdZ6F.js";import"./alert-dialog-DRenBCFY.js";import"./index-RDzITIWU.js";import"./index-ChfhAgVN.js";import"./index-DKXa17Pu.js";import"./Combination-cXPy01tN.js";import"./utils-BK-3Ko0Z.js";import"./index-i5lukUhi.js";import"./x-C1Xvrbjr.js";import"./createLucideIcon-DNGYmDqV.js";import"./index-CgvVPaUW.js";import"./index-wK9xT5vh.js";import"./index-DUr0H7tg.js";import"./index-DLZNXr4s.js";import"./floating-ui.react-dom-DZ8cfFMA.js";import"./index-DdpPGqe0.js";import"./index-Bn2EXX31.js";import"./sonner-C_S5-8cW.js";import"./index-DF0tB-kM.js";import"./breadcrumbs-_3SC32mF.js";import"./dropdown-menu-7tYwFHJv.js";import"./index-Jny6McFr.js";import"./check-B6-AaX-Q.js";import"./avatar-D15yh6LI.js";import"./use-initials-Cf6-0CWp.js";import"./app-sidebar-header-Z1y1A4rZ.js";import"./chevrons-up-down-Cgf5nTKj.js";import"./user-check-CoRh7QsK.js";import"./gift-BFM02Ea6.js";import"./banknote-B6-z3uyC.js";import"./file-text-yPRwgQua.js";import"./input-error-D6PK-08S.js";import"./input-DdnhdXmC.js";import"./label-ymCkihFa.js";const f=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),x=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),se=s=>{const r={paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",failed:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},a={paid:"Lunas",pending:"Pending",failed:"Gagal"};return e.jsx(m,{className:r[s]||r.pending,children:a[s]||s})},ae=s=>s===100?e.jsx(m,{className:"bg-green-100 text-green-800",children:"Selesai"}):s>0?e.jsxs(m,{className:"bg-blue-100 text-blue-800",children:["Berlangsung (",s,"%)"]}):e.jsx(m,{className:"bg-gray-100 text-gray-800",children:"Belum Dimulai"}),v=s=>{const r={course:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",bootcamp:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",webinar:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},a={course:"Kelas",bootcamp:"Bootcamp",webinar:"Webinar"};return e.jsx(m,{className:r[s]||r.course,children:a[s]||s})},te=s=>{const r=[];return s.courseItems&&r.push(...s.courseItems.map(a=>({type:"course",title:a.course.title,mentor:a.course.user.name,thumbnail:a.course.thumbnail,price:a.course.price}))),s.bootcampItems&&r.push(...s.bootcampItems.map(a=>({type:"bootcamp",title:a.bootcamp.title,mentor:a.bootcamp.user.name,thumbnail:a.bootcamp.thumbnail,price:a.bootcamp.price}))),s.webinarItems&&r.push(...s.webinarItems.map(a=>({type:"webinar",title:a.webinar.title,mentor:a.webinar.user.name,thumbnail:a.webinar.thumbnail,price:a.webinar.price}))),r},y=s=>{switch(s){case"course":return e.jsx(C,{className:"h-4 w-4"});case"bootcamp":return e.jsx(D,{className:"h-4 w-4"});case"webinar":return e.jsx(_,{className:"h-4 w-4"});default:return e.jsx(V,{className:"h-4 w-4"})}},k=({currentPage:s,lastPage:r,total:a,from:l,to:p,onPageChange:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-muted-foreground text-sm",children:["Menampilkan ",l," sampai ",p," dari ",a," entri"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>n(s-1),disabled:s<=1,children:[e.jsx(X,{className:"h-4 w-4"}),"Sebelumnya"]}),e.jsxs("span",{className:"text-sm",children:["Halaman ",s," dari ",r]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>n(s+1),disabled:s>=r,children:["Selanjutnya",e.jsx(ee,{className:"h-4 w-4"})]})]})]});function ls({user:s,invoices:r,enrollments:a,stats:l}){var b,N;const[p,n]=A.useState(!1),B=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Kelola Peserta",href:"/admin/users"},{title:s.name,href:`/admin/users/${s.id}`}],P=t=>{o.get(`/admin/users/${s.id}`,{invoices_page:t},{preserveState:!0})},S=t=>{o.get(`/admin/users/${s.id}`,{enrollments_page:t},{preserveState:!0})},I=()=>{o.delete(route("users.destroy",s.id),{onSuccess:()=>{o.visit("/admin/users")}})};let h="";if(s!=null&&s.phone_number){let t=s.phone_number.replace(/\D/g,"");t.startsWith("0")&&(t="62"+t.substring(1)),h=`https://wa.me/${t}`}return e.jsxs(K,{breadcrumbs:B,children:[e.jsx(M,{title:`Detail Peserta - ${s.name}`}),e.jsxs("div",{className:"space-y-6 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Detail Peserta"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Informasi lengkap dan aktivitas peserta"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[h&&e.jsxs(u,{children:[e.jsx(g,{asChild:!0,children:e.jsx(c,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[e.jsxs("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"w-4 fill-[#25D366]",children:[e.jsx("title",{children:"WhatsApp"}),e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})]}),"WhatsApp"]})})}),e.jsx(j,{children:e.jsx("p",{children:"Hubungi via WhatsApp"})})]}),e.jsxs(L,{open:p,onOpenChange:n,children:[e.jsxs(u,{children:[e.jsx(g,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Edit"]})})}),e.jsx(j,{children:e.jsx("p",{children:"Edit Data Pengguna"})})]}),e.jsx(W,{children:e.jsx($,{user:{...s,phone_number:s.phone_number??""},setOpen:n})})]}),e.jsxs(u,{children:[e.jsx(g,{asChild:!0,children:e.jsx("div",{children:e.jsx(E,{trigger:e.jsxs(c,{variant:"outline",size:"sm",className:"border-red-200 text-red-600 hover:border-red-300 hover:text-red-700",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Hapus"]}),title:"Apakah Anda yakin ingin menghapus pengguna ini?",itemName:s.name,onConfirm:I})})}),e.jsx(j,{children:e.jsx("p",{children:"Hapus Pengguna"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-blue-100",children:s.avatar?e.jsx("img",{src:s.avatar,alt:s.name,className:"h-20 w-20 rounded-full object-cover"}):e.jsx(O,{className:"h-10 w-10 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:((b=s.roles[0])==null?void 0:b.name)==="user"?"Peserta":(N=s.roles[0])==null?void 0:N.name}),e.jsxs("div",{className:"w-full space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(R,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{children:s.email})]}),s.phone_number&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(q,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{children:s.phone_number})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(G,{className:"text-muted-foreground h-4 w-4"}),e.jsxs("span",{children:["Bergabung ",x(s.created_at)]})]})]})]})}),e.jsxs("div",{className:"border-border bg-card text-card-foreground mt-6 rounded-xl border p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Statistik"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Total Belanja"})]}),e.jsx("span",{className:"font-medium",children:f(l.total_spent)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Total Transaksi"})]}),e.jsx("span",{className:"font-medium",children:l.total_transactions})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Kelas Diikuti"})]}),e.jsx("span",{className:"font-medium",children:l.total_courses})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm",children:"Bootcamp Diikuti"})]}),e.jsx("span",{className:"font-medium",children:l.total_bootcamps})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-pink-600"}),e.jsx("span",{className:"text-sm",children:"Webinar Diikuti"})]}),e.jsx("span",{className:"font-medium",children:l.total_webinars})]}),e.jsx(z,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Kelas Selesai"})]}),e.jsx("span",{className:"font-medium",children:l.completed_courses})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Kelas Aktif"})]}),e.jsx("span",{className:"font-medium",children:l.active_courses})]})]})]})]}),e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Program Yang Diikuti"}),a.data.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(Q,{className:"mb-2 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Belum mengikuti program apapun"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 space-y-4",children:a.data.map(t=>{const i=t.course||t.bootcamp||t.webinar;return e.jsxs("div",{className:"flex items-start gap-4 rounded-lg border p-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-gray-100",children:y(t.type)}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:i==null?void 0:i.title}),v(t.type)]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Mentor: ",i==null?void 0:i.user.name]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Bergabung: ",x(t.created_at)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"mb-2",children:f((i==null?void 0:i.price)||0)}),t.type==="course"&&t.progress!==void 0&&ae(t.progress)]})]})})]},t.id)})}),e.jsx(k,{currentPage:a.current_page,lastPage:a.last_page,total:a.total,from:a.from,to:a.to,onPageChange:S})]})]}),e.jsxs("div",{className:"border-border bg-card text-card-foreground rounded-xl border p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Riwayat Transaksi"}),r.data.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(w,{className:"mb-2 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Belum ada transaksi"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 space-y-4",children:r.data.map(t=>{const i=te(t);return e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["#",t.invoice_code]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:x(t.created_at)}),t.paid_at&&e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Dibayar: ",x(t.paid_at)]})]}),e.jsxs("div",{className:"text-right",children:[se(t.status),e.jsx("div",{className:"mt-1 font-medium",children:f(t.nett_amount)})]})]}),i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Item yang dibeli:"}),i.map((d,T)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[y(d.type),e.jsx("span",{className:"font-medium",children:d.title}),v(d.type),e.jsxs("span",{className:"text-muted-foreground",children:["- Mentor: ",d.mentor]})]},T))]})]},t.id)})}),e.jsx(k,{currentPage:r.current_page,lastPage:r.last_page,total:r.total,from:r.from,to:r.to,onPageChange:P})]})]})]})]})]})]})}export{ls as default};
