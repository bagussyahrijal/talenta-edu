import{r as j,j as e,L as X,S as Z}from"./app-DEHaruEn.js";import{B as b}from"./button-DJzYaf-1.js";import{C as B}from"./calendar-BhpvPbqm.js";import{C as ee}from"./checkbox-DZ0LVU5Z.js";import{C as ae,a as re,b as se,c as ne,d as te,e as le}from"./command-FeGJrgoc.js";import{u as ie,F as oe,a as i,b as t,c as l,d as c,e as o,f as d}from"./form-Bw4JQuyG.js";import{I as p}from"./input-CIzeZNfA.js";import{L as ce}from"./label-m4oQPR2d.js";import{P as _,a as w,b as P}from"./popover-CrdpKAHx.js";import{R as me,a as I}from"./radio-group-BecPq3CX.js";import{S as de}from"./switch-B5u1ZCJ7.js";import{T as M}from"./textarea-DcnIp9b0.js";import{A as ue}from"./admin-layout-CYuFyIt2.js";import{c as y,r as O,p as U}from"./utils-CgmkZRUo.js";import{s as pe,o as he,b as h,e as xe,n as S,c as je,f as A,a as ge}from"./types-CesQ1hKQ.js";import{E as ke}from"./Editor-CUCrM_T7.js";import{t as K}from"./index-BxNUFZQH.js";import{P as G}from"./package-pAEHDITi.js";import{C as fe}from"./chevrons-up-down-Dvji9aG-.js";import{C as ve}from"./check-BUNnxT5t.js";import{C as T}from"./calendar-C1P9EGvg.js";import{C as be}from"./clock-DJc6wXAj.js";import{f as C}from"./format-CNjBDjOL.js";import{i as J}from"./id-BLKIQCr7.js";/* empty css            */import"./index-77BJaden.js";import"./index-CX95Hkbf.js";import"./chevron-left-BOVFYR7M.js";import"./createLucideIcon-DxzEHUGp.js";import"./chevron-right-DYeVti3k.js";import"./chevron-down-CuoJcLW0.js";import"./index-du7IqNV6.js";import"./index-DEFaZjRI.js";import"./index-NFSyGkAy.js";import"./index-By6DilPo.js";import"./index-Tkynr6qg.js";import"./index-B-Iwrtt4.js";import"./index-DGWgDUD1.js";import"./Combination-CBSQt1XA.js";import"./index-DyH2eWtT.js";import"./floating-ui.react-dom-De539Sag.js";import"./dialog-DIxub_ue.js";import"./x-DGbQ0aW6.js";import"./search-D2FDJJAs.js";import"./circle-DLA8GPIY.js";import"./sonner-TD3Z84mI.js";import"./breadcrumbs-BitX1xLy.js";import"./tooltip-D46OCcgv.js";import"./index-Cjak0hds.js";import"./dropdown-menu-CJHOcPQ4.js";import"./index-D9l5o3fs.js";import"./avatar-CSxHwFog.js";import"./use-initials-gi5efCOE.js";import"./user-DFwFdzqz.js";import"./app-sidebar-header-lqiSHIHJ.js";import"./user-check-2dGGuDVV.js";import"./users-DH2tdi-M.js";import"./presentation-Bv7geU-t.js";import"./gift-CpXiIP7d.js";import"./banknote-ukqvzs_x.js";import"./dollar-sign-mmLEK3Kc.js";import"./file-text-DrzqLiD9.js";import"./index-BvSH5oQb.js";const ye=[{title:"Sertifikasi Kerjasama",href:route("partnership-products.index")},{title:"Tambah Produk Baru",href:route("partnership-products.create")}],Ce=[{value:"Senin",label:"Senin"},{value:"Selasa",label:"Selasa"},{value:"Rabu",label:"Rabu"},{value:"Kamis",label:"Kamis"},{value:"Jumat",label:"Jumat"},{value:"Sabtu",label:"Sabtu"},{value:"Minggu",label:"Minggu"}],Ne=he({title:h().nonempty("Judul harus diisi"),category_id:h().nonempty("Kategori harus dipilih"),short_description:h().nullable(),description:h().nullable(),key_points:h().nullable(),thumbnail:ge().nullable(),registration_deadline:A({required_error:"Batas waktu pendaftaran harus diisi",invalid_type_error:"Batas waktu pendaftaran harus berupa tanggal yang valid"}),event_deadline:A().nullable().optional(),payment_code:h().nullable().optional(),duration_days:S().min(0,"Durasi tidak boleh negatif"),schedule_days:je(h()).min(1,"Pilih minimal 1 hari"),strikethrough_price:S().min(0,"Harga tidak boleh negatif"),price:S().min(0,"Harga tidak boleh negatif"),registration_url:h().url("URL pendaftaran harus valid").nonempty("URL pendaftaran harus diisi"),type:xe(["regular","scholarship"],{required_error:"Tipe kategori harus dipilih"}),scholarship_group_link:h().url("Link grup harus berupa URL yang valid").nullable()}).refine(u=>u.strikethrough_price>0?u.strikethrough_price>u.price:!0,{message:"Harga coret harus lebih besar dari harga normal.",path:["strikethrough_price"]}).refine(u=>u.type==="scholarship"?u.scholarship_group_link&&u.scholarship_group_link.trim()!=="":!0,{message:"Link grup WhatsApp/Telegram harus diisi untuk tipe Beasiswa",path:["scholarship_group_link"]});function Ha({categories:u}){const[W,D]=j.useState(!1),[L,V]=j.useState(!1),[q,F]=j.useState(null),[z,N]=j.useState(!1),[Y,R]=j.useState(!1),[$,H]=j.useState(!1),n=ie({resolver:pe(Ne),defaultValues:{title:"",category_id:"",short_description:"",description:"",key_points:"",thumbnail:null,registration_deadline:void 0,event_deadline:void 0,payment_code:"",duration_days:0,schedule_days:[],strikethrough_price:0,price:0,registration_url:"",type:"regular",scholarship_group_link:""}}),E=a=>String(a).padStart(2,"0"),f=a=>a?`${E(a.getHours())}:${E(a.getMinutes())}`:"23:59",v=(a,r)=>{const[s,x]=r.split(":"),m=Number(s??0),g=Number(x??0),k=new Date(a);return k.setHours(m,g,0,0),k};function Q(a){var m;const r=new Date(a.registration_deadline);r.setSeconds(0,0);const s=a.event_deadline?new Date(a.event_deadline):null;s&&s.setSeconds(0,0);const x={...a,registration_deadline:C(r,"yyyy-MM-dd HH:mm:ss"),event_deadline:s?C(s,"yyyy-MM-dd HH:mm:ss"):null,payment_code:(m=a.payment_code)!=null&&m.trim()?a.payment_code.trim():null};Z.post(route("partnership-products.store"),x,{forceFormData:!0})}return e.jsxs(ue,{breadcrumbs:ye,children:[e.jsx(X,{title:"Tambah Produk Partnership Baru"}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tambah Produk Partnership Baru"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:"Tambahkan produk kerjasama dengan partner eksternal. Produk ini akan mengarahkan pengguna ke link pendaftaran eksternal."}),e.jsx(oe,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(Q),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{size:16}),e.jsx("h3",{className:"font-medium",children:"Informasi Produk"})]}),e.jsx(i,{control:n.control,name:"title",render:({field:a})=>e.jsxs(t,{children:[e.jsxs(l,{children:["Judul Produk ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsx(p,{placeholder:"Masukkan judul produk",...a,autoComplete:"off"})}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"category_id",render:({field:a})=>{var r;return e.jsxs(t,{className:"flex flex-col",children:[e.jsxs(l,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(_,{open:W,onOpenChange:D,children:[e.jsx(w,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",role:"combobox",className:y("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(r=u.find(s=>s.id===a.value))==null?void 0:r.name:"Pilih kategori",e.jsx(fe,{className:"opacity-50"})]})})}),e.jsx(P,{className:"p-0",children:e.jsxs(ae,{children:[e.jsx(re,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(se,{children:[e.jsx(ne,{children:"Tidak ada kategori ditemukan."}),e.jsx(te,{children:u.map(s=>e.jsxs(le,{value:s.name,onSelect:()=>{n.setValue("category_id",s.id),D(!1)},children:[s.name,e.jsx(ve,{className:y("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(o,{})]})}}),e.jsx(i,{control:n.control,name:"short_description",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Deskripsi Singkat"}),e.jsx(M,{...a,value:a.value??"",placeholder:"Deskripsi singkat produk (maks 500 karakter)",maxLength:500,autoComplete:"off"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"description",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Deskripsi Lengkap"}),e.jsx(M,{...a,value:a.value??"",placeholder:"Deskripsi lengkap produk",rows:6,autoComplete:"off"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"key_points",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Poin-Poin Penting"}),e.jsx(ke,{apiKey:"7apjqdre3ocnt08y5t5zlqyaytlom537pj6qbe0hlxhborco",value:a.value??"",onEditorChange:r=>a.onChange(r),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",height:300,menubar:!1}}),e.jsx(d,{children:"Format poin-poin penting dengan bullet list atau numbering"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"thumbnail",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Thumbnail"}),e.jsx("img",{src:q||"/assets/images/placeholder.png",alt:"Preview Thumbnail",className:"my-1 mt-2 h-40 rounded border object-cover"}),e.jsx(p,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg, image/webp",className:z?"border-red-500 focus-visible:ring-red-500":"",onChange:r=>{var x;const s=((x=r.target.files)==null?void 0:x[0])??null;if(s){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(s.type)){N(!0),K.error("Gambar harus png, jpg, jpeg, atau webp");return}if(s.size>2*1024*1024){N(!0),K.error("Ukuran file maksimal 2MB!");return}}if(N(!1),a.onChange(s),s){const m=new FileReader;m.onload=g=>{var k;return F((k=g.target)==null?void 0:k.result)},m.readAsDataURL(s)}else F(null)}}),e.jsx(d,{children:"Format: PNG, JPG, JPEG, WEBP. Maksimal 2MB"}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{size:16}),e.jsx("h3",{className:"font-medium",children:"Harga, Jadwal & URL"})]}),e.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"show-strikethrough",checked:L,onCheckedChange:a=>{V(a),a||n.setValue("strikethrough_price",0)}}),e.jsx(ce,{htmlFor:"show-strikethrough",children:"Aktifkan Harga Coret (Opsional)"})]}),L&&e.jsx(i,{control:n.control,name:"strikethrough_price",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Harga Coret"}),e.jsx(p,{...a,type:"text",placeholder:"Rp 0",value:O.format(a.value||0),onChange:r=>a.onChange(U(r.target.value)),autoComplete:"off"}),e.jsx(d,{children:"Harga asli yang akan ditampilkan tercoret."}),e.jsx(o,{})]})})]}),e.jsx(i,{control:n.control,name:"price",render:({field:a})=>e.jsxs(t,{children:[e.jsxs(l,{children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{...a,type:"text",placeholder:"Masukkan harga produk",value:O.format(a.value||0),onChange:r=>a.onChange(U(r.target.value)),autoComplete:"off"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"type",render:({field:a})=>e.jsxs(t,{className:"space-y-3",children:[e.jsxs(l,{children:["Tipe Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsxs(me,{onValueChange:a.onChange,defaultValue:a.value,className:"flex flex-col space-y-1",children:[e.jsxs(t,{className:"flex items-center space-y-0 space-x-3",children:[e.jsx(c,{children:e.jsx(I,{value:"regular"})}),e.jsx(l,{className:"font-normal",children:"Reguler"})]}),e.jsxs(t,{className:"flex items-center space-y-0 space-x-3",children:[e.jsx(c,{children:e.jsx(I,{value:"scholarship"})}),e.jsx(l,{className:"font-normal",children:"Beasiswa"})]})]})}),e.jsx(d,{children:"Pilih apakah produk ini termasuk program reguler atau beasiswa."}),e.jsx(o,{})]})}),n.watch("type")==="scholarship"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{control:n.control,name:"scholarship_group_link",render:({field:a})=>e.jsxs(t,{children:[e.jsxs(l,{children:["Link Grup WhatsApp/Telegram ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsx(p,{...a,type:"url",placeholder:"https://chat.whatsapp.com/xxxxx atau https://t.me/xxxxx",value:a.value??""})}),e.jsx(d,{children:"Link grup WhatsApp atau Telegram untuk peserta beasiswa yang diterima."}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"event_deadline",render:({field:a})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsx(l,{children:"Batas Waktu Event (Opsional)"}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsxs(_,{open:$,onOpenChange:H,children:[e.jsx(w,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",className:y("w-full flex-1 justify-start pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?C(a.value,"PPP",{locale:J}):e.jsx("span",{children:"Pilih tanggal"}),e.jsx(T,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(B,{mode:"single",selected:a.value??void 0,captionLayout:"dropdown",endMonth:new Date(new Date().getFullYear()+10,11),onSelect:r=>{if(!r){a.onChange(null);return}const s=f(a.value);a.onChange(v(r,s)),H(!1)},disabled:r=>{const s=new Date;return s.setHours(0,0,0,0),r<s},initialFocus:!0})})]}),e.jsx(c,{children:e.jsx(p,{type:"time",className:"w-full sm:w-36",value:f(a.value),disabled:!a.value,onChange:r=>{a.value&&a.onChange(v(a.value,r.target.value))}})})]}),e.jsx(d,{children:"Deadline event/agenda untuk program beasiswa (jika ada)."}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"payment_code",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Kode Pembayaran (Opsional)"}),e.jsx(c,{children:e.jsx(p,{...a,value:a.value??"",placeholder:"Contoh: PAY-ABC123",autoComplete:"off"})}),e.jsx(d,{children:"Kode pembayaran untuk kebutuhan internal/integrasi."}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"space-y-4 rounded-md border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("h4",{className:"font-medium",children:"Informasi Jadwal"})]}),e.jsx(i,{control:n.control,name:"registration_deadline",render:({field:a})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsxs(l,{children:["Batas Waktu Pendaftaran ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsxs(_,{open:Y,onOpenChange:R,children:[e.jsx(w,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",className:y("w-full flex-1 justify-start pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?C(a.value,"PPP",{locale:J}):e.jsx("span",{children:"Pilih tanggal"}),e.jsx(T,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(B,{mode:"single",selected:a.value,captionLayout:"dropdown",endMonth:new Date(new Date().getFullYear()+10,11),onSelect:r=>{if(!r)return;const s=f(a.value);a.onChange(v(r,s)),R(!1)},disabled:r=>{const s=new Date;return s.setHours(0,0,0,0),r<s},initialFocus:!0})})]}),e.jsx(c,{children:e.jsx(p,{type:"time",className:"w-full sm:w-36",value:f(a.value),disabled:!a.value,onChange:r=>{a.value&&a.onChange(v(a.value,r.target.value))}})})]}),e.jsx(d,{children:"Tanggal terakhir untuk melakukan pendaftaran"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"schedule_days",render:()=>e.jsxs(t,{children:[e.jsxs(l,{children:["Hari Pelaksanaan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{children:"Pilih hari-hari pelaksanaan program"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ce.map(a=>e.jsx(i,{control:n.control,name:"schedule_days",render:({field:r})=>{var s;return e.jsxs(t,{className:"flex flex-row items-center space-y-0 space-x-3",children:[e.jsx(c,{children:e.jsx(ee,{checked:(s=r.value)==null?void 0:s.includes(a.value),onCheckedChange:x=>{var m;return x?r.onChange([...r.value||[],a.value]):r.onChange((m=r.value)==null?void 0:m.filter(g=>g!==a.value))}})}),e.jsx(l,{className:"cursor-pointer font-normal",children:a.label})]},a.value)}},a.value))}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"duration_days",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Durasi Program (Hari)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"text-muted-foreground h-4 w-4"}),e.jsx(c,{children:e.jsx(p,{type:"number",placeholder:"0",min:"0",...a,value:a.value??0,onChange:r=>a.onChange(r.target.value?parseInt(r.target.value):0),autoComplete:"off",className:"flex-1"})})]}),e.jsx(d,{children:"Total durasi program dalam hari (kosongkan jika tidak ada)"}),e.jsx(o,{})]})})]}),e.jsx(i,{control:n.control,name:"registration_url",render:({field:a})=>e.jsxs(t,{children:[e.jsxs(l,{children:["URL Pendaftaran Eksternal ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{...a,value:a.value??"",type:"url",placeholder:"https://partner.com/register",autoComplete:"off"}),e.jsx(d,{children:"URL untuk mengarahkan user mendaftar/membeli produk di website partner"}),e.jsx(o,{})]})}),e.jsxs("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-4",children:[e.jsx("h4",{className:"mb-2 font-medium text-amber-900",children:"Informasi Penting"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-sm text-amber-800",children:[e.jsx("li",{children:"Produk ini tidak dijual di platform"}),e.jsx("li",{children:"User akan diarahkan ke URL pendaftaran eksternal"}),e.jsx("li",{children:"Setiap klik akan dicatat untuk statistik"}),e.jsx("li",{children:"Pastikan URL pendaftaran valid dan aktif"})]})]})]}),e.jsx(b,{type:"submit",className:"hover:cursor-pointer lg:col-span-2",children:"Simpan Draft"})]})})]})]})}export{Ha as default};
