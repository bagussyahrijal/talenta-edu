import{r as c,j as C,R as S}from"./app-DbpzdwFL.js";import{c as k,u as P}from"./index-BrWH3fgz.js";import{c as K,u as A,P as V}from"./index-Czgf-KsJ.js";var I=c.forwardRef((e,t)=>{const{children:n,...o}=e,i=c.Children.toArray(n),l=i.find(H);if(l){const v=l.props.children,r=i.map(b=>b===l?c.Children.count(v)>1?c.Children.only(null):c.isValidElement(v)?v.props.children:null:b);return C.jsx(M,{...o,ref:t,children:c.isValidElement(v)?c.cloneElement(v,void 0,r):null})}return C.jsx(M,{...o,ref:t,children:n})});I.displayName="Slot";var M=c.forwardRef((e,t)=>{const{children:n,...o}=e;if(c.isValidElement(n)){const i=G(n),l=q(o,n.props);return n.type!==c.Fragment&&(l.ref=t?K(t,i):i),c.cloneElement(n,l)}return c.Children.count(n)>1?c.Children.only(null):null});M.displayName="SlotClone";var W=({children:e})=>C.jsx(C.Fragment,{children:e});function H(e){return c.isValidElement(e)&&e.type===W}function q(e,t){const n={...t};for(const o in t){const i=e[o],l=t[o];/^on[A-Z]/.test(o)?i&&l?n[o]=(...r)=>{l(...r),i(...r)}:i&&(n[o]=i):o==="style"?n[o]={...i,...l}:o==="className"&&(n[o]=[i,l].filter(Boolean).join(" "))}return{...e,...n}}function G(e){var o,i;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function re(e){const t=e+"CollectionProvider",[n,o]=k(t),[i,l]=n(t,{collectionRef:{current:null},itemMap:new Map}),v=a=>{const{scope:p,children:s}=a,d=S.useRef(null),u=S.useRef(new Map).current;return C.jsx(i,{scope:p,itemMap:u,collectionRef:d,children:s})};v.displayName=t;const r=e+"CollectionSlot",b=S.forwardRef((a,p)=>{const{scope:s,children:d}=a,u=l(r,s),m=A(p,u.collectionRef);return C.jsx(I,{ref:m,children:d})});b.displayName=r;const h=e+"CollectionItemSlot",R="data-radix-collection-item",F=S.forwardRef((a,p)=>{const{scope:s,children:d,...u}=a,m=S.useRef(null),E=A(p,m),f=l(h,s);return S.useEffect(()=>(f.itemMap.set(m,{ref:m,...u}),()=>void f.itemMap.delete(m))),C.jsx(I,{[R]:"",ref:E,children:d})});F.displayName=h;function g(a){const p=l(e+"CollectionConsumer",a);return S.useCallback(()=>{const d=p.collectionRef.current;if(!d)return[];const u=Array.from(d.querySelectorAll(`[${R}]`));return Array.from(p.itemMap.values()).sort((f,N)=>u.indexOf(f.ref.current)-u.indexOf(N.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:v,Slot:b,ItemSlot:F},g,o]}var B=c.createContext(void 0);function se(e){const t=c.useContext(B);return e||t||"ltr"}var x=0;function ce(){c.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??L()),document.body.insertAdjacentElement("beforeend",e[1]??L()),x++,()=>{x===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),x--}},[])}function L(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var T="focusScope.autoFocusOnMount",O="focusScope.autoFocusOnUnmount",_={bubbles:!1,cancelable:!0},Z="FocusScope",$=c.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:i,onUnmountAutoFocus:l,...v}=e,[r,b]=c.useState(null),h=P(i),R=P(l),F=c.useRef(null),g=A(t,s=>b(s)),a=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(o){let s=function(E){if(a.paused||!r)return;const f=E.target;r.contains(f)?F.current=f:y(F.current,{select:!0})},d=function(E){if(a.paused||!r)return;const f=E.relatedTarget;f!==null&&(r.contains(f)||y(F.current,{select:!0}))},u=function(E){if(document.activeElement===document.body)for(const N of E)N.removedNodes.length>0&&y(r)};document.addEventListener("focusin",s),document.addEventListener("focusout",d);const m=new MutationObserver(u);return r&&m.observe(r,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",s),document.removeEventListener("focusout",d),m.disconnect()}}},[o,r,a.paused]),c.useEffect(()=>{if(r){j.add(a);const s=document.activeElement;if(!r.contains(s)){const u=new CustomEvent(T,_);r.addEventListener(T,h),r.dispatchEvent(u),u.defaultPrevented||(z(ee(U(r)),{select:!0}),document.activeElement===s&&y(r))}return()=>{r.removeEventListener(T,h),setTimeout(()=>{const u=new CustomEvent(O,_);r.addEventListener(O,R),r.dispatchEvent(u),u.defaultPrevented||y(s??document.body,{select:!0}),r.removeEventListener(O,R),j.remove(a)},0)}}},[r,h,R,a]);const p=c.useCallback(s=>{if(!n&&!o||a.paused)return;const d=s.key==="Tab"&&!s.altKey&&!s.ctrlKey&&!s.metaKey,u=document.activeElement;if(d&&u){const m=s.currentTarget,[E,f]=J(m);E&&f?!s.shiftKey&&u===f?(s.preventDefault(),n&&y(E,{select:!0})):s.shiftKey&&u===E&&(s.preventDefault(),n&&y(f,{select:!0})):u===m&&s.preventDefault()}},[n,o,a.paused]);return C.jsx(V.div,{tabIndex:-1,...v,ref:g,onKeyDown:p})});$.displayName=Z;function z(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(y(o,{select:t}),document.activeElement!==n)return}function J(e){const t=U(e),n=w(t,e),o=w(t.reverse(),e);return[n,o]}function U(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const i=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||i?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function w(e,t){for(const n of e)if(!Q(n,{upTo:t}))return n}function Q(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function X(e){return e instanceof HTMLInputElement&&"select"in e}function y(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&X(e)&&t&&e.select()}}var j=Y();function Y(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=D(e,t),e.unshift(t)},remove(t){var n;e=D(e,t),(n=e[0])==null||n.resume()}}}function D(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function ee(e){return e.filter(t=>t.tagName!=="A")}export{$ as F,ce as a,re as c,se as u};
