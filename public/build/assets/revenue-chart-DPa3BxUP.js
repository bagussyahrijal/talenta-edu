import{j as a}from"./app-CoKrZrj3.js";import{C as f,a as g,b as j,d as C,c as y,e as b}from"./card-CSya3Ejz.js";import{l as T,B as d,X as m,Y as x,n as v,o as N,R as F,p as k,q as _}from"./chart-DdvFEJ1G.js";import{T as R}from"./trending-up-B_MDZLTd.js";import{T as w}from"./trending-down-B3IcjcBN.js";import"./utils-BK-3Ko0Z.js";import"./index-Ctnh2FjI.js";import"./createLucideIcon-DNGYmDqV.js";var A=T({chartName:"BarChart",GraphicalChild:d,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:m},{axisType:"yAxis",AxisComp:x}],formatAxisMap:v});const D={total_amount:{label:"Pendapatan",color:"hsl(var(--primary))"}},c=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),M=e=>e>=1e9?`Rp ${(e/1e9).toFixed(1)}M`:e>=1e6?`Rp ${(e/1e6).toFixed(1)}Jt`:e>=1e3?`Rp ${(e/1e3).toFixed(0)}K`:`Rp ${e.toLocaleString("id-ID")}`;function G({data:e}){const i=e[e.length-1],s=e[e.length-2];let n=0,o=!0;i&&s&&s.total_amount>0&&(n=(i.total_amount-s.total_amount)/s.total_amount*100,o=n>=0);const h=e.reduce((r,t)=>r+t.total_amount,0),p=e.reduce((r,t)=>r+t.transaction_count,0);return a.jsxs(f,{children:[a.jsxs(g,{children:[a.jsx(j,{children:"Laporan Pendapatan dan Transaksi"}),a.jsx(C,{children:"Data pendapatan dan transaksi 12 bulan terakhir"})]}),a.jsx(y,{children:a.jsx(N,{config:D,children:a.jsx(F,{width:"100%",height:350,children:a.jsxs(A,{accessibilityLayer:!0,data:e,margin:{bottom:20},children:[a.jsx(k,{strokeDasharray:"3 3",vertical:!1}),a.jsx(m,{dataKey:"month_year",tickLine:!1,tickMargin:10,axisLine:!1,angle:-45,textAnchor:"end",height:30,interval:0,fontSize:11}),a.jsx(x,{tickFormatter:M,axisLine:!1,tickLine:!1,fontSize:11,width:60}),a.jsx(_,{cursor:{fill:"rgba(0, 0, 0, 0.1)"},content:({active:r,payload:t,label:u})=>{if(r&&t&&t.length){const l=t[0].payload;return a.jsxs("div",{className:"bg-background border-border rounded-lg border p-3 shadow-lg",children:[a.jsx("p",{className:"text-sm font-medium",children:u}),a.jsxs("p",{className:"text-primary text-sm",children:["Pendapatan: ",a.jsx("span",{className:"font-semibold",children:c(l.total_amount)})]}),a.jsxs("p",{className:"text-muted-foreground text-sm",children:["Transaksi: ",a.jsx("span",{className:"font-medium",children:l.transaction_count})]})]})}return null}}),a.jsx(d,{dataKey:"total_amount",fill:"var(--color-primary)",radius:[4,4,0,0],maxBarSize:60})]})})})}),a.jsxs(b,{className:"flex-col items-start gap-2 text-sm",children:[a.jsx("div",{className:"flex gap-2 leading-none font-medium",children:e.length>1&&a.jsx(a.Fragment,{children:o?a.jsxs(a.Fragment,{children:["Naik ",Math.abs(n).toFixed(1),"% dari bulan lalu",a.jsx(R,{className:"h-4 w-4 text-green-500"})]}):a.jsxs(a.Fragment,{children:["Turun ",Math.abs(n).toFixed(1),"% dari bulan lalu",a.jsx(w,{className:"h-4 w-4 text-red-500"})]})})}),a.jsxs("div",{className:"text-muted-foreground leading-none",children:["Total: ",c(h)," dari ",p," transaksi"]})]})]})}export{G as RevenueChart};
