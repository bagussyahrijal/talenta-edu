import{r as g,j as e,L as X,S as Z}from"./app-B9k543NU.js";import{B as b}from"./button-DWq4XQ52.js";import{C as I}from"./calendar-C9M6WqT9.js";import{C as ee}from"./checkbox-Cr0wStQq.js";import{C as ae,a as re,b as se,c as ne,d as te,e as le}from"./command-Cg8SlvIe.js";import{u as ie,F as oe,a as i,b as t,c as l,d as c,e as o,f as d}from"./form-zX-mry1Q.js";import{I as u}from"./input-B_Jr_SfU.js";import{L as ce}from"./label-BQPqA9h7.js";import{P as _,a as w,b as P}from"./popover-1srCRybB.js";import{R as me,a as M}from"./radio-group-B_eLWcGy.js";import{S as de}from"./switch-nZO2aKae.js";import{T as B}from"./textarea-C_TUueEf.js";import{A as ue}from"./admin-layout-UOEM0eDK.js";import{c as y,r as O,p as U}from"./utils-DNwDO3wP.js";import{s as pe,o as he,u as xe,e as je,b as p,n as S,c as ge,f as K,a as ke,l as fe,g as ve}from"./types-DDJkfg42.js";import{E as be}from"./Editor-Bd-xPiHh.js";import{t as A}from"./index-BoBOq2RS.js";import{P as z}from"./package-C0WyQBZr.js";import{C as ye}from"./chevrons-up-down-CWEHdZBK.js";import{C as Ce}from"./check-BG-2gSzy.js";import{C as T}from"./calendar-P7ah9vup.js";import{C as Ne}from"./clock-DHnl5S4r.js";import{f as C}from"./format-CNjBDjOL.js";import{i as G}from"./id-BLKIQCr7.js";import"./index-8wMXBjkj.js";import"./index-qYu_OV1P.js";import"./chevron-left-CTF3anT5.js";import"./createLucideIcon-BIzRavGD.js";import"./chevron-right-HyNfPIAz.js";import"./chevron-down-p-BxrI1x.js";import"./index-BK_UWH4g.js";import"./index-BRg3vzdq.js";import"./index-D_Q69Lzo.js";import"./index-BVS-bPzl.js";import"./index-Cf-JJrIS.js";import"./index-D4yuA-TT.js";import"./index-Dh5hHpbY.js";import"./Combination-CJRSUlLR.js";import"./index-CXQSgMJz.js";import"./floating-ui.react-dom-Dh-Wg6z5.js";import"./dialog-B2oiLzVm.js";import"./x-Di2ae29F.js";import"./search-DkF3a4tP.js";import"./circle-kat8DH01.js";import"./sonner-CtdgLmfI.js";import"./breadcrumbs-BadV6xlx.js";import"./tooltip-BX41d577.js";import"./index-CxTepKCm.js";import"./dropdown-menu-C06qPCCE.js";import"./index-YtxiWvKx.js";import"./avatar-K9Q5xXWF.js";import"./use-initials-CA5n79aC.js";import"./user-ymxNUy8p.js";import"./app-sidebar-header-D1IrFlrJ.js";import"./user-check-C3066dr6.js";import"./users-B8Rr1364.js";import"./presentation-BUBZ1gUl.js";import"./gift-Bb5d3i4m.js";import"./banknote-DLyCAYFj.js";import"./dollar-sign-BdRAD1m4.js";import"./file-text-DWMqDS0p.js";import"./index-C166bkIT.js";const _e=[{title:"Sertifikasi Kerjasama",href:route("partnership-products.index")},{title:"Tambah Produk Baru",href:route("partnership-products.create")}],we=[{value:"Senin",label:"Senin"},{value:"Selasa",label:"Selasa"},{value:"Rabu",label:"Rabu"},{value:"Kamis",label:"Kamis"},{value:"Jumat",label:"Jumat"},{value:"Sabtu",label:"Sabtu"},{value:"Minggu",label:"Minggu"}],Pe=he({title:p().nonempty("Judul harus diisi"),category_id:p().nonempty("Kategori harus dipilih"),short_description:p().nullable(),description:p().nullable(),key_points:p().nullable(),thumbnail:ke().nullable(),registration_deadline:K({required_error:"Batas waktu pendaftaran harus diisi",invalid_type_error:"Batas waktu pendaftaran harus berupa tanggal yang valid"}),event_deadline:K().nullable().optional(),payment_code:p().nullable().optional(),duration_days:S().min(0,"Durasi tidak boleh negatif"),schedule_days:ge(p()).min(1,"Pilih minimal 1 hari"),strikethrough_price:S().min(0,"Harga tidak boleh negatif"),price:S().min(0,"Harga tidak boleh negatif"),registration_url:p().url("URL pendaftaran harus valid").nonempty("URL pendaftaran harus diisi"),type:je(["regular","scholarship"],{required_error:"Tipe kategori harus dipilih"}),scholarship_group_link:xe([p().url("Link grup harus berupa URL yang valid"),fe(""),ve()])}).refine(j=>j.strikethrough_price>0?j.strikethrough_price>j.price:!0,{message:"Harga coret harus lebih besar dari harga normal.",path:["strikethrough_price"]});function Ia({categories:j}){const[J,D]=g.useState(!1),[L,V]=g.useState(!1),[W,F]=g.useState(null),[q,N]=g.useState(!1),[Y,R]=g.useState(!1),[$,H]=g.useState(!1),n=ie({resolver:pe(Pe),defaultValues:{title:"",category_id:"",short_description:"",description:"",key_points:"",thumbnail:null,registration_deadline:void 0,event_deadline:void 0,payment_code:"",duration_days:0,schedule_days:[],strikethrough_price:0,price:0,registration_url:"",type:"regular",scholarship_group_link:""}}),E=a=>String(a).padStart(2,"0"),f=a=>a?`${E(a.getHours())}:${E(a.getMinutes())}`:"23:59",v=(a,r)=>{const[s,h]=r.split(":"),m=Number(s??0),x=Number(h??0),k=new Date(a);return k.setHours(m,x,0,0),k};function Q(a){var m,x;const r=new Date(a.registration_deadline);r.setSeconds(0,0);const s=a.event_deadline?new Date(a.event_deadline):null;s&&s.setSeconds(0,0);const h={...a,registration_deadline:C(r,"yyyy-MM-dd HH:mm:ss"),event_deadline:s?C(s,"yyyy-MM-dd HH:mm:ss"):null,payment_code:(m=a.payment_code)!=null&&m.trim()?a.payment_code.trim():null,scholarship_group_link:(x=a.scholarship_group_link)!=null&&x.trim()?a.scholarship_group_link.trim():null};Z.post(route("partnership-products.store"),h,{forceFormData:!0})}return e.jsxs(ue,{breadcrumbs:_e,children:[e.jsx(X,{title:"Tambah Produk Partnership Baru"}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tambah Produk Partnership Baru"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:"Tambahkan produk kerjasama dengan partner eksternal. Produk ini akan mengarahkan pengguna ke link pendaftaran eksternal."}),e.jsx(oe,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(Q),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{size:16}),e.jsx("h3",{className:"font-medium",children:"Informasi Produk"})]}),e.jsx(i,{control:n.control,name:"title",render:({field:a})=>e.jsxs(t,{children:[e.jsxs(l,{children:["Judul Produk ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsx(u,{placeholder:"Masukkan judul produk",...a,autoComplete:"off"})}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"category_id",render:({field:a})=>{var r;return e.jsxs(t,{className:"flex flex-col",children:[e.jsxs(l,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(_,{open:J,onOpenChange:D,children:[e.jsx(w,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",role:"combobox",className:y("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(r=j.find(s=>s.id===a.value))==null?void 0:r.name:"Pilih kategori",e.jsx(ye,{className:"opacity-50"})]})})}),e.jsx(P,{className:"p-0",children:e.jsxs(ae,{children:[e.jsx(re,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(se,{children:[e.jsx(ne,{children:"Tidak ada kategori ditemukan."}),e.jsx(te,{children:j.map(s=>e.jsxs(le,{value:s.name,onSelect:()=>{n.setValue("category_id",s.id),D(!1)},children:[s.name,e.jsx(Ce,{className:y("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(o,{})]})}}),e.jsx(i,{control:n.control,name:"short_description",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Deskripsi Singkat"}),e.jsx(B,{...a,value:a.value??"",placeholder:"Deskripsi singkat produk (maks 500 karakter)",maxLength:500,autoComplete:"off"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"description",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Deskripsi Lengkap"}),e.jsx(B,{...a,value:a.value??"",placeholder:"Deskripsi lengkap produk",rows:6,autoComplete:"off"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"key_points",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Poin-Poin Penting"}),e.jsx(be,{apiKey:"c7quf44sjov5dzvyzvgh4sryhheoi9t6vikfbzqk61pzpi77",value:a.value??"",onEditorChange:r=>a.onChange(r),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",height:300,menubar:!1}}),e.jsx(d,{children:"Format poin-poin penting dengan bullet list atau numbering"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"thumbnail",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Thumbnail"}),e.jsx("img",{src:W||"/assets/images/placeholder.png",alt:"Preview Thumbnail",className:"my-1 mt-2 h-40 rounded border object-cover"}),e.jsx(u,{type:"file",name:a.name,accept:"image/png, image/jpeg, image/jpg, image/webp",className:q?"border-red-500 focus-visible:ring-red-500":"",onChange:r=>{var h;const s=((h=r.target.files)==null?void 0:h[0])??null;if(s){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(s.type)){N(!0),A.error("Gambar harus png, jpg, jpeg, atau webp");return}if(s.size>2*1024*1024){N(!0),A.error("Ukuran file maksimal 2MB!");return}}if(N(!1),a.onChange(s),s){const m=new FileReader;m.onload=x=>{var k;return F((k=x.target)==null?void 0:k.result)},m.readAsDataURL(s)}else F(null)}}),e.jsx(d,{children:"Format: PNG, JPG, JPEG, WEBP. Maksimal 2MB"}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{size:16}),e.jsx("h3",{className:"font-medium",children:"Harga, Jadwal & URL"})]}),e.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"show-strikethrough",checked:L,onCheckedChange:a=>{V(a),a||n.setValue("strikethrough_price",0)}}),e.jsx(ce,{htmlFor:"show-strikethrough",children:"Aktifkan Harga Coret (Opsional)"})]}),L&&e.jsx(i,{control:n.control,name:"strikethrough_price",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Harga Coret"}),e.jsx(u,{...a,type:"text",placeholder:"Rp 0",value:O.format(a.value||0),onChange:r=>a.onChange(U(r.target.value)),autoComplete:"off"}),e.jsx(d,{children:"Harga asli yang akan ditampilkan tercoret."}),e.jsx(o,{})]})})]}),e.jsx(i,{control:n.control,name:"price",render:({field:a})=>e.jsxs(t,{children:[e.jsxs(l,{children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{...a,type:"text",placeholder:"Masukkan harga produk",value:O.format(a.value||0),onChange:r=>a.onChange(U(r.target.value)),autoComplete:"off"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"type",render:({field:a})=>e.jsxs(t,{className:"space-y-3",children:[e.jsxs(l,{children:["Tipe Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsxs(me,{onValueChange:a.onChange,defaultValue:a.value,className:"flex flex-col space-y-1",children:[e.jsxs(t,{className:"flex items-center space-y-0 space-x-3",children:[e.jsx(c,{children:e.jsx(M,{value:"regular"})}),e.jsx(l,{className:"font-normal",children:"Reguler"})]}),e.jsxs(t,{className:"flex items-center space-y-0 space-x-3",children:[e.jsx(c,{children:e.jsx(M,{value:"scholarship"})}),e.jsx(l,{className:"font-normal",children:"Beasiswa"})]})]})}),e.jsx(d,{children:"Pilih apakah produk ini termasuk program reguler atau beasiswa."}),e.jsx(o,{})]})}),n.watch("type")==="scholarship"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{control:n.control,name:"scholarship_group_link",render:({field:a})=>e.jsxs(t,{children:[e.jsxs(l,{children:["Link Grup WhatsApp/Telegram ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{children:e.jsx(u,{...a,type:"url",placeholder:"https://chat.whatsapp.com/xxxxx atau https://t.me/xxxxx",value:a.value??""})}),e.jsx(d,{children:"Link grup WhatsApp atau Telegram untuk peserta beasiswa yang diterima."}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"event_deadline",render:({field:a})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsx(l,{children:"Batas Waktu Event (Opsional)"}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsxs(_,{open:$,onOpenChange:H,children:[e.jsx(w,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",className:y("w-full flex-1 justify-start pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?C(a.value,"PPP",{locale:G}):e.jsx("span",{children:"Pilih tanggal"}),e.jsx(T,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(I,{mode:"single",selected:a.value??void 0,captionLayout:"dropdown",endMonth:new Date(new Date().getFullYear()+10,11),onSelect:r=>{if(!r){a.onChange(null);return}const s=f(a.value);a.onChange(v(r,s)),H(!1)},disabled:r=>{const s=new Date;return s.setHours(0,0,0,0),r<s},initialFocus:!0})})]}),e.jsx(c,{children:e.jsx(u,{type:"time",className:"w-full sm:w-36",value:f(a.value),disabled:!a.value,onChange:r=>{a.value&&a.onChange(v(a.value,r.target.value))}})})]}),e.jsx(d,{children:"Deadline event/agenda untuk program beasiswa (jika ada)."}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"payment_code",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Kode Pembayaran (Opsional)"}),e.jsx(c,{children:e.jsx(u,{...a,value:a.value??"",placeholder:"Contoh: PAY-ABC123",autoComplete:"off"})}),e.jsx(d,{children:"Kode pembayaran untuk kebutuhan internal/integrasi."}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"space-y-4 rounded-md border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("h4",{className:"font-medium",children:"Informasi Jadwal"})]}),e.jsx(i,{control:n.control,name:"registration_deadline",render:({field:a})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsxs(l,{children:["Batas Waktu Pendaftaran ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsxs(_,{open:Y,onOpenChange:R,children:[e.jsx(w,{asChild:!0,children:e.jsx(c,{children:e.jsxs(b,{variant:"outline",className:y("w-full flex-1 justify-start pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?C(a.value,"PPP",{locale:G}):e.jsx("span",{children:"Pilih tanggal"}),e.jsx(T,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(I,{mode:"single",selected:a.value,captionLayout:"dropdown",endMonth:new Date(new Date().getFullYear()+10,11),onSelect:r=>{if(!r)return;const s=f(a.value);a.onChange(v(r,s)),R(!1)},disabled:r=>{const s=new Date;return s.setHours(0,0,0,0),r<s},initialFocus:!0})})]}),e.jsx(c,{children:e.jsx(u,{type:"time",className:"w-full sm:w-36",value:f(a.value),disabled:!a.value,onChange:r=>{a.value&&a.onChange(v(a.value,r.target.value))}})})]}),e.jsx(d,{children:"Tanggal terakhir untuk melakukan pendaftaran"}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"schedule_days",render:()=>e.jsxs(t,{children:[e.jsxs(l,{children:["Hari Pelaksanaan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{children:"Pilih hari-hari pelaksanaan program"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:we.map(a=>e.jsx(i,{control:n.control,name:"schedule_days",render:({field:r})=>{var s;return e.jsxs(t,{className:"flex flex-row items-center space-y-0 space-x-3",children:[e.jsx(c,{children:e.jsx(ee,{checked:(s=r.value)==null?void 0:s.includes(a.value),onCheckedChange:h=>{var m;return h?r.onChange([...r.value||[],a.value]):r.onChange((m=r.value)==null?void 0:m.filter(x=>x!==a.value))}})}),e.jsx(l,{className:"cursor-pointer font-normal",children:a.label})]},a.value)}},a.value))}),e.jsx(o,{})]})}),e.jsx(i,{control:n.control,name:"duration_days",render:({field:a})=>e.jsxs(t,{children:[e.jsx(l,{children:"Durasi Program (Hari)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"text-muted-foreground h-4 w-4"}),e.jsx(c,{children:e.jsx(u,{type:"number",placeholder:"0",min:"0",...a,value:a.value??0,onChange:r=>a.onChange(r.target.value?parseInt(r.target.value):0),autoComplete:"off",className:"flex-1"})})]}),e.jsx(d,{children:"Total durasi program dalam hari (kosongkan jika tidak ada)"}),e.jsx(o,{})]})})]}),e.jsx(i,{control:n.control,name:"registration_url",render:({field:a})=>e.jsxs(t,{children:[e.jsxs(l,{children:["URL Pendaftaran Eksternal ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{...a,value:a.value??"",type:"url",placeholder:"https://partner.com/register",autoComplete:"off"}),e.jsx(d,{children:"URL untuk mengarahkan user mendaftar/membeli produk di website partner"}),e.jsx(o,{})]})}),e.jsxs("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-4",children:[e.jsx("h4",{className:"mb-2 font-medium text-amber-900",children:"Informasi Penting"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-sm text-amber-800",children:[e.jsx("li",{children:"Produk ini tidak dijual di platform"}),e.jsx("li",{children:"User akan diarahkan ke URL pendaftaran eksternal"}),e.jsx("li",{children:"Setiap klik akan dicatat untuk statistik"}),e.jsx("li",{children:"Pastikan URL pendaftaran valid dan aktif"})]})]})]}),e.jsx(b,{type:"submit",className:"hover:cursor-pointer lg:col-span-2",children:"Simpan Draft"})]})})]})]})}export{Ia as default};
