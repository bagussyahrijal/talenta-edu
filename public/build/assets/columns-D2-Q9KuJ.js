import{j as e,$ as u,r as _,S as v}from"./app-DDrbOcx7.js";import{D as d}from"./data-table-column-header-CcM_0QUL.js";import{D as C}from"./delete-dialog-DmZONmpx.js";import{B as p}from"./badge-DPaCgwXx.js";import{B as x}from"./button-n6t9aljh.js";import{C as j}from"./checkbox-DJcK8sHB.js";import{D,a as P,b as T}from"./dialog-CISI9EwT.js";import{T as l,a as c,b as o}from"./tooltip-u_ljFAmM.js";import S from"./edit-ChS6Oxtg.js";import{B as g,P as f,M as N}from"./presentation-BHuumwn-.js";import{S as k}from"./shopping-bag-UNKX1pvI.js";import{C as B}from"./calendar-CsOO3jmI.js";import{F as A}from"./folder-Dk-JFXbO.js";import{S as M}from"./square-pen-DVbJgcPy.js";import{T as K}from"./trash-DNspaaQz.js";import{f as b}from"./format-CNjBDjOL.js";import{i as y}from"./id-BLKIQCr7.js";import"./utils-iBm1Tl-X.js";import"./dropdown-menu-lbd9n5hY.js";import"./index-F3JIwsXn.js";import"./index-D6HRdG18.js";import"./index-nY49zWbg.js";import"./index-CcfFFHDG.js";import"./index-Ddlkc-n2.js";import"./index-BHF_HL52.js";import"./floating-ui.react-dom-D8FI13iJ.js";import"./index-DtQ_Rnnk.js";import"./Combination-CnK2SSZv.js";import"./check-NWeBrsRy.js";import"./createLucideIcon-C_qgjRbq.js";import"./chevrons-up-down-DnoUVkkH.js";import"./eye-off-Cw55foba.js";import"./alert-dialog-BblurcdT.js";import"./index-Db4ZopbB.js";import"./index-C8yCsOo4.js";import"./index-CoQoLWu2.js";import"./index-C3inlMtn.js";import"./x-CwuwPgbl.js";import"./index-D48N0srj.js";import"./input-error-kmcCtdTe.js";import"./input-Cyw6XLMS.js";import"./label-D-uUvZd6.js";const _e=[{id:"select",header:({table:s})=>e.jsx(j,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:r=>s.toggleAllPageRowsSelected(!!r),"aria-label":"Select all"}),cell:({row:s})=>e.jsx(j,{checked:s.getIsSelected(),onCheckedChange:r=>s.toggleSelected(!!r),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"no",header:"No",cell:({row:s})=>{const r=s.index+1;return e.jsx("div",{className:"font-medium",children:r})}},{accessorKey:"name",header:({column:s})=>e.jsx(d,{column:s,title:"Nama Pengguna"}),cell:({row:s})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx(u,{href:route("users.show",s.original.id),className:"text-primary font-medium hover:underline",children:s.original.name}),e.jsx("span",{className:"text-xs text-gray-500",children:s.original.email})]})},{accessorKey:"phone_number",header:({column:s})=>e.jsx(d,{column:s,title:"No. Telepon"}),cell:({row:s})=>e.jsx("p",{className:"text-sm",children:s.original.phone_number||"-"})},{accessorKey:"total_enrollments",header:({column:s})=>e.jsx(d,{column:s,title:"Program"}),filterFn:(s,r,i)=>{if(i.length===0)return!0;const n=s.original.program_types||[];return i.some(t=>n.includes(t))},cell:({row:s})=>{const r=s.original,i=r.courses_count>0||r.bootcamps_count>0||r.webinars_count>0;return e.jsx("div",{className:"flex flex-wrap gap-1",children:i?e.jsxs(e.Fragment,{children:[r.courses_count>0&&e.jsxs(l,{children:[e.jsx(c,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"flex items-center gap-1 text-xs",children:[e.jsx(g,{className:"h-3 w-3 text-blue-600"}),r.courses_count]})}),e.jsx(o,{children:e.jsxs("p",{className:"text-xs",children:[e.jsx("span",{className:"font-semibold",children:"Kelas Online"}),e.jsx("br",{}),r.courses_count," kelas online terdaftar"]})})]}),r.bootcamps_count>0&&e.jsxs(l,{children:[e.jsx(c,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"flex items-center gap-1 text-xs",children:[e.jsx(f,{className:"h-3 w-3 text-green-600"}),r.bootcamps_count]})}),e.jsx(o,{children:e.jsxs("p",{className:"text-xs",children:[e.jsx("span",{className:"font-semibold",children:"Bootcamp"}),e.jsx("br",{}),r.bootcamps_count," bootcamp terdaftar"]})})]}),r.webinars_count>0&&e.jsxs(l,{children:[e.jsx(c,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"flex items-center gap-1 text-xs",children:[e.jsx(N,{className:"h-3 w-3 text-purple-600"}),r.webinars_count]})}),e.jsx(o,{children:e.jsxs("p",{className:"text-xs",children:[e.jsx("span",{className:"font-semibold",children:"Webinar"}),e.jsx("br",{}),r.webinars_count," webinar terdaftar"]})})]})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})})}},{accessorKey:"last_purchase_date",header:({column:s})=>e.jsx(d,{column:s,title:"Pembelian Terakhir"}),filterFn:(s,r,i)=>{const n=s.original.last_purchase_date!==null;if(i.length===0)return!0;const t=n?"true":"false";return i.includes(t)},cell:({row:s})=>{const r=s.original.last_purchase_date,i=s.original.last_purchase_items||[],n=s.original.last_purchase_total||0;if(!r)return e.jsx("span",{className:"text-sm text-gray-400",children:"Belum ada"});const t=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),m=a=>{switch(a){case"course":return e.jsx(g,{className:"h-3 w-3 text-blue-600"});case"bootcamp":return e.jsx(f,{className:"h-3 w-3 text-green-600"});case"webinar":return e.jsx(N,{className:"h-3 w-3 text-purple-600"});default:return null}},h=a=>{switch(a){case"course":return"Kelas Online";case"bootcamp":return"Bootcamp";case"webinar":return"Webinar";default:return a}};return e.jsxs(l,{children:[e.jsx(c,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(k,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{children:b(new Date(r),"dd MMM yyyy",{locale:y})})]})}),e.jsx(o,{className:"max-w-xs",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold",children:"Detail Pembelian Terakhir"}),e.jsx("div",{className:"space-y-1",children:i.map((a,w)=>e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx("div",{className:"mt-0.5",children:m(a.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:a.title}),e.jsxs("p",{className:"text-muted text-[10px]",children:[h(a.type)," â€¢ ",t(a.price)]})]})]},w))}),e.jsx("div",{className:"border-t pt-1",children:e.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:"text-green-500",children:t(n)})]})})]})})]})}},{accessorKey:"created_at",header:({column:s})=>e.jsx(d,{column:s,title:"Bergabung"}),cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(B,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{children:b(new Date(s.original.created_at),"dd MMM yyyy",{locale:y})})]})},{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Aksi"}),cell:function({row:r}){const[i,n]=_.useState(!1),t=r.original;let m="";if(t!=null&&t.phone_number){let a=t.phone_number.replace(/\D/g,"");a.startsWith("0")&&(a="62"+a.substring(1)),m=`https://wa.me/${a}`}const h=()=>{v.delete(route("users.destroy",t.id))};return e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[m&&e.jsxs(l,{children:[e.jsx(c,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",children:e.jsxs("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"w-4 fill-[#25D366]",children:[e.jsx("title",{children:"WhatsApp"}),e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})]})})})}),e.jsx(o,{children:e.jsx("p",{children:"Hubungi via WhatsApp"})})]}),e.jsxs(l,{children:[e.jsx(c,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(u,{href:`/admin/users/${t.id}`,className:"text-blue-600 hover:text-blue-800",children:e.jsx(A,{className:"size-4"})})})}),e.jsx(o,{children:e.jsx("p",{children:"Detail Pengguna"})})]}),e.jsxs(D,{open:i,onOpenChange:n,children:[e.jsxs(l,{children:[e.jsx(c,{asChild:!0,children:e.jsx(P,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",children:e.jsx(M,{className:"size-4"})})})}),e.jsx(o,{children:e.jsx("p",{children:"Edit Pengguna"})})]}),e.jsx(T,{children:e.jsx(S,{user:t,setOpen:n})})]}),e.jsxs(l,{children:[e.jsx(c,{asChild:!0,children:e.jsx("div",{children:e.jsx(C,{trigger:e.jsxs(x,{variant:"link",size:"icon",className:"size-8 text-red-500 hover:cursor-pointer",children:[e.jsx(K,{}),e.jsx("span",{className:"sr-only",children:"Hapus Pengguna"})]}),title:"Apakah Anda yakin ingin menghapus pengguna ini?",itemName:t.name,onConfirm:h})})}),e.jsx(o,{children:e.jsx("p",{children:"Hapus Pengguna"})})]})]})}}];export{_e as columns};
