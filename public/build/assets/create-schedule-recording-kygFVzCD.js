import{r as s,j as e,S as j}from"./app-B9k543NU.js";import{B as u}from"./button-DWq4XQ52.js";import{D as v,a as y,b as S,g as D,c as L,d as N,e as C}from"./dialog-B2oiLzVm.js";import{I as E}from"./input-B_Jr_SfU.js";import{L as x}from"./label-BQPqA9h7.js";import{t as I}from"./index-BoBOq2RS.js";import{L as T}from"./link-k-nynop5.js";import"./index-8wMXBjkj.js";import"./index-qYu_OV1P.js";import"./utils-DNwDO3wP.js";import"./index-Dh5hHpbY.js";import"./index-BRg3vzdq.js";import"./Combination-CJRSUlLR.js";import"./x-Di2ae29F.js";import"./createLucideIcon-BIzRavGD.js";function f(r){const n=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,a=r.match(n);return a&&a[2].length===11?a[2]:""}function V({bootcampId:r,scheduleId:n,currentRecordingUrl:a}){const[p,l]=s.useState(!1),[m,h]=s.useState(a||""),[i,c]=s.useState(!1),[b,o]=s.useState("");s.useEffect(()=>{if(h(a||""),a){const t=f(a);o(t?`https://www.youtube.com/embed/${t}`:"")}else o("")},[a,p]);const g=t=>{const d=t.target.value;if(h(d),d){const w=f(d);o(w?`https://www.youtube.com/embed/${w}`:"")}else o("")},k=t=>{if(t.preventDefault(),!m.trim()){I.error("Link rekaman tidak boleh kosong");return}c(!0),j.post(route("bootcamps.add-recording",{bootcamp:r,schedule:n}),{recording_url:m},{onSuccess:()=>{l(!1),c(!1)},onError:()=>{c(!1)}})};return e.jsxs(v,{open:p,onOpenChange:l,children:[e.jsx(y,{asChild:!0,children:e.jsxs(u,{variant:a?"outline":"default",size:"sm",className:"w-full",children:[e.jsx(T,{className:"h-4 w-4"}),a?"Edit Link Rekaman":"Tambah Link Rekaman"]})}),e.jsxs(S,{className:"sm:max-w-[600px]",children:[e.jsxs(D,{children:[e.jsx(L,{children:a?"Edit Link Rekaman":"Tambah Link Rekaman"}),e.jsx(N,{children:"Masukkan link YouTube untuk rekaman sesi bootcamp ini. Link akan otomatis ditampilkan untuk peserta yang terdaftar."})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"recording_url",children:"Link YouTube Rekaman"}),e.jsx(E,{id:"recording_url",placeholder:"https://www.youtube.com/watch?v=...",value:m,onChange:g,disabled:i}),e.jsx("p",{className:"text-xs text-gray-500",children:"Contoh: https://www.youtube.com/watch?v=dQw4w9WgXcQ atau https://youtu.be/dQw4w9WgXcQ"})]}),b&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Preview Video"}),e.jsx("div",{className:"w-full",children:e.jsx("iframe",{className:"aspect-video w-full rounded-lg border",src:b,title:"YouTube Preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),e.jsxs(C,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:i,children:"Batal"}),e.jsx(u,{type:"submit",disabled:i,children:i?"Menyimpan...":"Simpan"})]})]})]})]})}export{V as default};
